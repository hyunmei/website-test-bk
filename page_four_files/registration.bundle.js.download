(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1356:function(e,r,t){e.exports={root:"AFndP",loginDetailsInfo:"_1ohNK",rememberUsername:"_1cs8L",rememberUsermame:"_1jI_i",helpBlock:"_1XD2A",confirmPasscode:"YZZP-",secureDetailsInfo:"_1WmrZ",moreLink:"_1qLrd",rememberUsernameInfo:"EfIJc",shortHr:"_9IvtS"}},1358:function(e,r,t){e.exports={textWrapper:"_2riZz",text:"h5qY5"}},1361:function(e,r,t){e.exports={cardNumber:"H8IDD",well:"_3MekN",form:"_24xhS"}},1363:function(e,r,t){e.exports={root:"_2Lp0Z",hr:"_3WeEi",privacyPolicy:"_2DTSc",contactYouCheckbox:"_1a15r",checkbox:"K3Zqb",emailAddress:"_3G85h",confirmEmail:"_2eVB7",mobilePhone:"_3sELf","root--email-only":"U2EaI",test:"_1yGOH"}},1365:function(e,r,t){e.exports={underlinePlaceholderWrap:"_2Gy-V",underlinePlaceholder:"_3x8vz","underlinePlaceholder--error":"_3ZUV2","underlinePlaceholder--hidden":"Iz1YV"}},1367:function(e,r,t){e.exports={showHide:"_25pAC","showHide--iconPadding":"_2G5IH","showHide--error":"_2WBTZ"}},1369:function(e,r,t){e.exports={rightHandIcon:"_1Rhkq",bgIcon:"_12JQl","rightHandIcon--mounted":"_1mMOs","icon--cyan":"_3rbNZ","icon--green":"_2Wrn0","icon--red":"nisZU",cvv:"_3Wmbd"}},1371:function(e,r,t){e.exports={"rel-wrapper":"_2RIky"}},1373:function(e,r,t){e.exports={root:"_1LYz5","root--block":"_3j4nc",optionWrap:"_15etD",option:"_1vAd6","option--fauxChecked":"_2NSMB",option_label:"_3pnc-","option_label--main":"_82Pa8","option_label--sub":"_2R1TK",option_input:"_1rCtv","option--short":"_1X47K",option_componentWrap:"_3kolW",horizontal:"_1-XJG",vertical:"_33izr","option--error":"_1dBVv","label-button":"JWK67",label:"_3LH9Y","label--radio":"uaXlD","root--error":"_22qNN",input:"_1wtcQ"}},1375:function(e,r,t){e.exports={root:"_3YRIo","root--singleInputStyle":"_i_qS","root--fauxFocus":"_2DDi4","root--fauxDisabled":"ivBsA","root--fauxError":"_1T46q","root--textCentered":"_2QNk5",inputWrap:"_2NDCE",delimiter:"_3U1VT"}},1377:function(e,r,t){e.exports={leftHandIcon:"b-q8S","leftHandIcon--error":"_3I7qd"}},1379:function(e,r,t){e.exports={label:"V47z2","label--disabled":"i5zQY"}},1381:function(e,r,t){e.exports={"input-wrapper":"_1xwQH"}},1383:function(e,r,t){e.exports={inputBoxRoot:"_4_E-k","input--has-error":"_1leEa","input--has-lefthand-icon":"_36nis","inputBoxRoot--noStyling":"_2D1VE","inputBoxRoot--disabled":"_1NYNp","input--monospace":"UqGYx",twoDigit:"_2FCnC",fourDigit:"_2mKfx",dotsFont:"_3nRGH",fontNormal:"_2sWZY","inputBoxRoot--error":"RFZKq"}},1385:function(e,r,t){e.exports={help:"_3yh5Q"}},1387:function(e,r,t){e.exports={error:"_1lyBb"}},1389:function(e,r,t){e.exports={root:"_2cz2T",checklist:"_1aPPm",helpText:"_1FjJz",label:"_3SjSX","label--warningText":"_2B8pg",validator:"_3EAyU",warningText:"_1JVZ4","validator--init":"_1Uuyw","validator--invalid":"krZMP","validator--valid":"_3qACn"}},1391:function(e,r,t){e.exports={root:"_19ofd",checkbox:"OAbhz",label:"_1t6P-","label-suffix":"_1Tpxf","root--error":"_3AL0H"}},1393:function(e,r,t){e.exports={root:"_1Wjq8","tick-list":"_1jjq_","green-tick":"_1skVf","button-container":"cWIuW"}},1395:function(e,r,t){e.exports={progressBarBackground:"_1643g",progressBar:"ijq4T","progressBar--1":"_2M16L","progressBar--2":"_60bZw","progressBar--3":"RDZgg","progressBar--4":"_2eg01",stepNumber:"_1MJWN"}},1397:function(e,r,t){e.exports={root:"_1liSm",icon:"_2WWsm"}},1399:function(e,r,t){e.exports={root:"j4chR",label:"dz6zE",hr:"_37__Z",step:"_37EtG","step--hidden":"_3R57i"}},1401:function(e,r,t){e.exports={content:"_3ZRRC",headerWell:"_1P2uW",root:"_2ry9l",icon:"_2WWSt",terms:"_3sEuy",callCharges:"_3Gnci","tel-icon":"_McXs"}},1405:function(e,r,t){e.exports={root:"AGd2_",container:"_1bOc_",row:"yPZF6",col:"C0iqq",panel:"_2FKcQ","panel--wide":"_2rsTW"}},1508:function(e,r,t){"use strict";t.r(r);var n={};t.r(n),t.d(n,"NEXT_STEP",function(){return o}),t.d(n,"PREVIOUS_STEP",function(){return l}),t.d(n,"SET_SCREEN",function(){return c}),t.d(n,"SET_SCREEN_OPTIONS",function(){return i}),t.d(n,"SET_ERROR_TYPE",function(){return s}),t.d(n,"SET_ACCOUNT_DETAILS",function(){return u}),t.d(n,"SET_CONTACT_DATA_RETRIEVED",function(){return m}),t.d(n,"SET_ERROR_CODE",function(){return d}),t.d(n,"MULTI_STEP",function(){return p}),t.d(n,"REGISTRATION_SUCCESS",function(){return f}),t.d(n,"ALREADY_REGISTERED",function(){return b}),t.d(n,"UNABLE_TO_REGISTER",function(){return E}),t.d(n,"REGISTRATION_SUCCESS_PREFERENCES_FAILED",function(){return h}),t.d(n,"USER_ALREADY_REGISTERED",function(){return g}),t.d(n,"USER_ALREADY_REGISTERED_OTP",function(){return y}),t.d(n,"USER_ALREADY_REGISTERED_WITH_CARDS",function(){return v}),t.d(n,"USER_ALREADY_REGISTERED_WITH_CARDS_OTP",function(){return _}),t.d(n,"TECHNICAL_DIFFICULTIES",function(){return O}),t.d(n,"ACCOUNT_NOT_ELIGIBLE",function(){return T}),t.d(n,"EXCEEDED_ATTEMPTS",function(){return S}),t.d(n,"NOT_PAPERLESS_CHOOSE_ALERT",function(){return C}),t.d(n,"IS_PAPERLESS_CHOOSE_ALERT",function(){return P}),t.d(n,"NOT_PAPERLESS_ALERT_CONFIRM",function(){return N}),t.d(n,"IS_PAPERLESS_ALERT_CONFIRM",function(){return R}),t.d(n,"ACKNOWLEDGE",function(){return w}),t.d(n,"UPDATE",function(){return I}),t.d(n,"inlineErrors",function(){return A}),t.d(n,"invalidDetails",function(){return L}),t.d(n,"topLevelErrors",function(){return j}),t.d(n,"errorMessages",function(){return D}),t.d(n,"CHANGE_FIELD_VALUE",function(){return a.a}),t.d(n,"SET_INLINE_ERROR",function(){return a.d}),t.d(n,"SET_CHECKLIST_ERRORS",function(){return a.c}),t.d(n,"SET_TOP_LEVEL_ERROR",function(){return a.e}),t.d(n,"SET_TOUCHED",function(){return a.f}),t.d(n,"RESET_ALL_TOUCHED",function(){return a.b});var a=t(185),o="NEXT_STEP",l="PREVIOUS_STEP",c="SET_SCREEN",i="SET_SCREEN_OPTIONS",s="SET_ERROR_TYPE",u="SET_ACCOUNT_DETAILS",m="SET_CONTACT_DATA_RETRIEVED",d="SET_ERROR_CODE",p="MULTI_STEP",f="REGISTRATION_SUCCESS",b="ALREADY_REGISTERED",E="UNABLE_TO_REGISTER",h="REGISTRATION_SUCCESS_PREFERENCES_FAILED",g="USER_ALREADY_REGISTERED",y="USER_ALREADY_REGISTERED_OTP",v="USER_ALREADY_REGISTERED_WITH_CARDS",_="USER_ALREADY_REGISTERED_WITH_CARDS_OTP",O="TECHNICAL_DIFFICULTIES",T="ACCOUNT_NOT_ELIGIBLE",S="EXCEEDED_ATTEMPTS",C="NOT_PAPERLESS_CHOOSE_ALERT",P="IS_PAPERLESS_CHOOSE_ALERT",N="NOT_PAPERLESS_ALERT_CONFIRM",R="IS_PAPERLESS_ALERT_CONFIRM",w="ACKNOWLEDGE",I="UPDATE",A={usernameRequired:"Please create your username",characterLength8To16:"Be 8-16 characters long",minDigits1:"Have at least 1 digit",minAlphaChars1:"Have at least 1 letter",onlyAlphaNumeric:'Not use spaces or any special characters, such as ! " £ $ < > @ ( ) *',emptyOrAlphaNumeric:'Not use spaces or any special characters, such as ! " £ $ < > @ ( ) *',alphaNumericOrSpace:'Not use any special characters, such as ! " £ $ < > @ ( ) *',passcodeRequired:"Please create your passcode",onlyNumeric:"Contain only numbers",maxRepeatingChars2Passcode:"Have no digit repeated more than twice in a row (e.g. 111874)",exactDigits6:"Be 6 digits only",maxNumbersInSequence3:"Have no more than 3 digits in order (e.g.123498 or 654300)",passcodeConfirmRequired:"Please confirm your passcode",memorableWordRequired:"Please create your memorable word",onlyAlpha:"Contain only A-Z",maxRepeatingChars2MemWord:"Have no letters repeated more than twice in a row (e.g. shooop)",maxLettersInSequence2:"Have no more than 2 letters in alphabetical order (e.g. abcde)",maxKeyboardSequence3:"Not use letters from rows of keys on the keyboard (e.g. qwerty)",maxTwiceLettersInSequence:"Not have 2 letters repeated more than twice in a row (e.g. aabbcc)",characterLength6To8:"Be 6-8 characters long",memorableWordConfirmRequired:"Please confirm your memorable word",memorableReminderRequired:"Please create your memorable word reminder",consentRequired:"Please complete to continue",dateOfBirth:"Not be your date of birth",lastName:"Not be your last name",onlyAlphaAndLength6To8:"Be 6-8 letters only",confirmPasscode:"This does not match your previous entry. Please check and try again",matchesDateOfBirth:"Not be your date of birth",matchesMemorableWord:"This does not match your previous entry. Please check and try again",matchesLastName:"Not be your last name",doesNotMatchMemorableWord:"Not be your memorable word",beUpTo20Characters:"Be up to 20 characters long including spaces",ERR_REG001:"Please complete your username",ERR_REG002:"Please complete your passcode",ERR_REG003:"Please complete your memorable word",ERR_REG004:"Please complete your memorable word reminder",ERR_REG005:"Chosen username is already in use"},L="<p>Some of the details you've entered don't match our records. Please check them carefully and try again.</p>",j={NOT_A_PRIMARY_CARD:{title:"You can't register using an additional cardholder's card",message:"<p>Only the primary cardholder can register to manage their account online.</p><p>Please check and try again.</p>"},INVALID_DETAILS:{title:"One or more details are incorrect",message:"".concat(L)},INVALID_DETAILS_ATTEMPTS_LEFT_2:{title:"One or more details are incorrect",message:"".concat(L,"<p>You have <strong>two attempts left</strong></p>")},INVALID_DETAILS_ATTEMPTS_LEFT_1:{title:"One or more details are incorrect",message:"".concat(L,"<p>You have <strong>one attempt left</strong></p>")}},D={topLevelErrors:j,invalidDetails:L,inlineErrors:A},k=t(0),x=t.n(k),F=t(1),B=t.n(F),W=t(15),M=t.n(W),U=t(68),H=t.n(U),G=t(34),Y=t.n(G),q=t(39),K=t.n(q),V=t(42),Z=t(94),z=t(95),Q=t(191),J=t(10),X=t.n(J),$=t(147),ee=(t(1405),{"./style.css":{root:"AGd2_",container:"_1bOc_",row:"yPZF6",col:"C0iqq",panel:"_2FKcQ","panel--wide":"_2rsTW"}}),re=function(e){var r=e.children,t=e.currentStep,n=e.showProgressIndicator,a=e.isLoading,o=e.screen;return x.a.createElement("div",{className:"AGd2_"},x.a.createElement(Q.a,null,x.a.createElement("title",null,"Barclaycard | Registering for online services")),x.a.createElement(Z.a,{authenticated:!1}),x.a.createElement(V.a,{className:"_1bOc_"},x.a.createElement(K.a,{className:"yPZF6"},x.a.createElement(H.a,{lg:8,lgOffset:2,sm:10,smOffset:1,xs:12},1===t&&x.a.createElement("h1",null,"Register to access your Barclaycard account online"),n&&x.a.createElement(jr,{step:t-1}),x.a.createElement(Y.a,{className:"bc-panel c-login-panel loginPanel "+M()(X()("panel",{"panel--wide":o===ea.MULTI_STEP}),ee)},a?x.a.createElement($.a,null):r)))),x.a.createElement(z.b,null))};re.propTypes={children:B.a.node,currentStep:B.a.number,showProgressIndicator:B.a.bool,isLoading:B.a.bool,screen:B.a.string};var te=Object(k.memo)(re),ne=function(e){var r=e.screen,t=e.step,n=e.Component,a=gr(),o=a.currentStep,l=a.screen;return x.a.createElement(k.Fragment,null,t?o===t&&l===ea.MULTI_STEP&&x.a.createElement(n,null):l===r&&x.a.createElement(n,null))};ne.propTypes={Component:B.a.any,step:B.a.number,screen:B.a.string};var ae=ne,oe=t(65),le=function(e){return e.switches};function ce(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var n,a,o=[],l=!0,c=!1;try{for(t=t.call(e);!(l=(n=t.next()).done)&&(o.push(n.value),!r||o.length!==r);l=!0);}catch(e){c=!0,a=e}finally{try{l||null==t.return||t.return()}finally{if(c)throw a}}return o}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return ie(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ie(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var se=function(){var e=ce(Object(k.useState)(!0),2),r=e[0],t=e[1],n=Object(oe.b)(le),a=Object(k.useMemo)(function(){return void 0!==n.newRegistrationLive},[n]),o=Object(k.useCallback)(function(){a&&(!1===n.newRegistrationLive&&window.location.replace("/ecom/as2/registration.do"),!0===n.newRegistrationLive&&t(!1))},[a,n]);return Object(k.useEffect)(o,[a,o]),{isLoading:r,redirect:o}},ue=function(e){var r=e.children,t=gr(),n=t.currentStep,a=t.screen,o=se().isLoading,l=Object(k.useMemo)(function(){return n>1&&n<=5&&a===ea.MULTI_STEP},[n,a]);return x.a.createElement(te,{currentStep:n,showProgressIndicator:l,isLoading:o,screen:a},r)};ue.Route=ae,ue.propTypes={children:B.a.node};var me=ue,de=t(289),pe=t(464),fe=t.n(pe),be=function(e){var r=e.accountRegistrationDate;return x.a.createElement(k.Fragment,null,x.a.createElement("p",null,"You registered your account on ",r,", so you should already have your passcode (6 digits) and memorable word (6-8 letters), along with your User ID."),x.a.createElement("p",null,"If you can’t remember your user ID you can always use your 16-digit card number to log in."))};be.propTypes={accountRegistrationDate:B.a.string};var Ee=be,he=function(e){var r=e.accountRegistrationDate;return e.username?x.a.createElement("p",null,"You registered your account on ",r,", so you should already have your username, passcode (6 digits) and memorable word (6-8 letters)."):x.a.createElement(Ee,{accountRegistrationDate:r})};he.propTypes={accountRegistrationDate:B.a.string,username:B.a.string};var ge=he,ye=function(e){var r=e.accountRegistrationDate,t=e.cards,n=e.username;return x.a.createElement(k.Fragment,null,n?x.a.createElement("p",null,"You registered your account using one of your Barclaycards on"," ",r,", so you should already have your username, passcode (6 digits) and memorable word (6-8 letters)."):x.a.createElement(k.Fragment,null,x.a.createElement("p",null,"You registered your account using one of your Barclaycards on"," ",r,", so you should already have your passcode (6 digits) and memorable word (6-8 letters), along with your User ID."),x.a.createElement("p",null,"If you can’t remember your user ID you can always use your 16-digit card number to log in.")),x.a.createElement("p",null,x.a.createElement("strong",null,"You don't need to register again.")," Just log in to your account as usual to view and manage all your Barclaycards."),x.a.createElement("p",null,t.map(function(e,r){return x.a.createElement(k.Fragment,{key:r},"".concat(e.productName," ").concat(e.maskedCardNumber),x.a.createElement("br",null))})))};ye.propTypes={accountRegistrationDate:B.a.string,cards:B.a.array,username:B.a.string};var ve=ye,_e=function(e){var r=e.username;return r?x.a.createElement("div",{className:"p3giT"},x.a.createElement("p",null,"Your username"),x.a.createElement("p",{className:"_7QsgY"},r)):null};_e.propTypes={username:B.a.string};var Oe=_e,Te=t(69),Se=function(e){var r=e.goToLogin,t=e.className;return x.a.createElement(Te.a,{style:"secondary",onClick:r,className:t,bdl:!0},"Log in")};Se.propTypes={goToLogin:B.a.func,className:B.a.string};var Ce=Se,Pe=t(76),Ne=function(e){var r=e.goToLogin;return x.a.createElement("p",{className:"zeacf"},"To ",x.a.createElement(Pe.a,{onClick:r},"log in")," you'll also need your ",x.a.createElement("strong",null,"passcode")," and ",x.a.createElement("strong",null,"memorable word"),".")};Ne.propTypes={goToLogin:B.a.func};var Re=Ne,we=function(e){return e.username?x.a.createElement("p",null,x.a.createElement("strong",null,"If you've forgotten any of your login details"),", you can reset them now if you have your mobile phone to hand."):x.a.createElement("p",null,"If you've forgotten your passcode or memorable word you can reset them now if you have your mobile phone to hand.")};we.propTypes={username:B.a.string};var Ie=function(e){var r=e.showLogInLink,t=void 0!==r&&r,n=e.goToLogin,a=e.username;return x.a.createElement("div",{className:"_22NMj"},t&&x.a.createElement(k.Fragment,null,x.a.createElement(we,{username:a}),x.a.createElement("p",null,x.a.createElement("strong",null,"If you can remember your log in details")," you'll be able to ",x.a.createElement(Pe.a,{onClick:n},"log in now"),".")),!t&&x.a.createElement(k.Fragment,null,x.a.createElement("hr",null),x.a.createElement(we,{username:a})),x.a.createElement(Te.a,{onClick:n,style:"secondary",className:"FBNct",bdl:!0},"Reset your details"))};Ie.propTypes={showLogInLink:B.a.bool,goToLogin:B.a.func,username:B.a.string};var Ae=Ie,Le=t(1350),je=t(470),De=t(19),ke=function(e){var r=e.goToForgottenPasscode,t=e.goToForgottenMemWord;return x.a.createElement(Le.a,{basicIndex:!0,className:"w1fmN"},x.a.createElement(je.a,{className:"panel _3aGmY",titleTag:"div",title:"Forgotten your passcode?",key:1,uuid:"question-1",titleStyle:"arrows"},x.a.createElement("div",null,x.a.createElement("p",null,"You'll be able to reset it online if you know your memorable word."),x.a.createElement(Te.a,{onClick:r,style:"secondary",className:fe.a.resetBtn,bdl:!0},"Reset your details"))),x.a.createElement(je.a,{className:"panel _3aGmY",titleTag:"div",title:"Forgotten your memorable word?",key:2,uuid:"question-2",titleStyle:"arrows"},x.a.createElement("div",null,x.a.createElement("p",null,"You'll be able to reset it online if you know your passcode."),x.a.createElement(Te.a,{onClick:t,style:"secondary",className:fe.a.resetBtn,bdl:!0},"Reset your details"))),x.a.createElement(je.a,{className:"panel _3aGmY",titleTag:"div",title:x.a.createElement(k.Fragment,null,"Forgotten ",x.a.createElement("strong",null,"both")," passcode and memorable word?"),key:3,uuid:"question-3",titleStyle:"arrows"},x.a.createElement("div",null,x.a.createElement("p",null,"For urgent access to your account you can use the Barclaycard or Barclays app if you've registered for it, or you can call us."),x.a.createElement("ul",null,x.a.createElement("li",null,x.a.createElement("span",{"aria-hidden":"true",className:"telephone-icon _2PqH_"}),x.a.createElement("strong",null,"0800 161 5300")," (from your landline)"),x.a.createElement("li",null,x.a.createElement("span",{"aria-hidden":"true",className:"telephone-icon _2PqH_"}),x.a.createElement("strong",null,"+44 (0)333 202 7900")," (outside the UK)"),x.a.createElement("li",{className:"HJfuK"},x.a.createElement("span",null,"Monday to Friday 8am to 8pm, excluding bank holidays"))),x.a.createElement("p",null,x.a.createElement(De.a,{link:"callCharges"},"View our call charges")))))};ke.propTypes={goToForgottenPasscode:B.a.func,goToForgottenMemWord:B.a.func};var xe=ke,Fe=function(e){var r=e.errorType,t=e.goToLogin,n=e.goToForgottenPasscode,a=e.goToForgottenMemWord,o=e.customerFirstName,l=e.accountRegistrationDate,c=e.username,i=e.cards;return x.a.createElement("div",{className:"_3npTv"},x.a.createElement(de.a,{color:"orange",icon:"orange-alert",title:"Sorry, you're already registered",className:fe.a.headerWell}),x.a.createElement("div",{className:"jL03K"},x.a.createElement("p",null,"Hello ",o,","),r===ea.USER_ALREADY_REGISTERED&&x.a.createElement(k.Fragment,null,x.a.createElement(ge,{accountRegistrationDate:l,username:c}),x.a.createElement(Oe,{username:c}),x.a.createElement(Re,{goToLogin:t}),x.a.createElement(xe,{goToForgottenPasscode:n,goToForgottenMemWord:a})),r===ea.USER_ALREADY_REGISTERED_OTP&&x.a.createElement(k.Fragment,null,x.a.createElement(ge,{accountRegistrationDate:l,username:c}),x.a.createElement(Oe,{username:c}),x.a.createElement(Ae,{showLogInLink:!0,goToLogin:t,goToForgottenPasscode:n,username:c})),r===ea.USER_ALREADY_REGISTERED_WITH_CARDS&&x.a.createElement(k.Fragment,null,x.a.createElement(ve,{accountRegistrationDate:l,cards:i,username:c}),x.a.createElement(Oe,{username:c}),x.a.createElement(Ce,{goToLogin:t,className:"_3WDZa"}),x.a.createElement(xe,{goToForgottenPasscode:n,goToForgottenMemWord:a})),r===ea.USER_ALREADY_REGISTERED_WITH_CARDS_OTP&&x.a.createElement(k.Fragment,null,x.a.createElement(ve,{accountRegistrationDate:l,cards:i,username:c}),x.a.createElement(Oe,{username:c}),x.a.createElement(Ce,{goToLogin:t,className:"_2T1St"}),x.a.createElement(Ae,{goToLogin:t,username:c}))))};Fe.propTypes={errorType:B.a.string,goToLogin:B.a.func,goToForgottenPasscode:B.a.func,goToForgottenMemWord:B.a.func,scrollTop:B.a.func,customerFirstName:B.a.string,accountRegistrationDate:B.a.string,username:B.a.string,cards:B.a.array};var Be=Object(k.memo)(Fe),We=t(101),Me=t(86),Ue=t(30),He=t(46),Ge=t(14),Ye=function(){var e=function(){var e=Er(),r=e.cards,t=e.responseCode;return{dataLayerInfo:Object(k.useMemo)(function(){var e="NoOTP";return r&&r.length>0?e=/OTP_ELIGIBLE/i.test(t)?"MultiplecardsOTP":"MultiplecardsNoOTP":/OTP_ELIGIBLE/i.test(t)&&(e="WithOTP"),{page_version:e}},[r,t])}}().dataLayerInfo,r=gr().errorType,t=Er(),n=t.accountRegistrationDate,a=t.username,o=t.cards,l=t.firstName,c=Object(We.e)(He.a.getState(),He.a.dispatch).pushLocation,i=Object(k.useCallback)(function(e){Object(Ge.a)(e),c("/login")()},[c]),s=Object(k.useCallback)(function(e){Object(Ge.a)(e),window.location.href=Ue.a.forgottenPasscodeVerify.link},[]),u=Object(k.useCallback)(function(e){Object(Ge.a)(e),window.location.href=Ue.a.forgottenMemorableVerify.link},[]);Object(We.f)(function(){Me.a.scrollToY(0,300,"easeInOutQuint"),Object(Ge.c)("register","AlreadyRegistered",e)});var m={errorType:r,customerFirstName:l,accountRegistrationDate:n,username:a,cards:o,goToLogin:i,goToForgottenPasscode:s,goToForgottenMemWord:u};return x.a.createElement(Be,m)},qe=t(469),Ke=t.n(qe),Ve=function(e){var r=e.goToLogin,t=e.close,n=e.username,a=e.preferredContactAddress;return x.a.createElement("div",{className:"_1aIoT"},x.a.createElement("h2",null,"Registration summary"),x.a.createElement("p",null,"Thanks for registering to access your Barclaycard account online."),x.a.createElement("p",null,"This service is available 24/7, with 12 months of account history at your fingertips, including all your statements."),x.a.createElement("p",null,x.a.createElement("strong",null,"Remember to look out for your statement ready alert each month"),". We'll send it to ",a),x.a.createElement("hr",null),x.a.createElement("h2",null,"You're ready to log in"),x.a.createElement("p",null,"To log in you'll need your ",x.a.createElement("strong",null,"username")," (shown below), and both the ",x.a.createElement("strong",null,"passcode")," and ",x.a.createElement("strong",null,"memorable word")," ","you just set, along with your card details."),x.a.createElement("p",null,"Your username"),x.a.createElement("p",{className:"_1RpRc"},n),x.a.createElement("div",{className:"_1jHJU"},x.a.createElement(Te.a,{onClick:t,style:"secondary",bdl:!0},"Close"),x.a.createElement(Te.a,{onClick:r,className:Ke.a.rightButton,bdl:!0},"Log in")))};Ve.propTypes={close:B.a.func,goToLogin:B.a.func,username:B.a.string,preferredContactAddress:B.a.string};var Ze=Object(k.memo)(Ve),ze=function(e){return x.a.createElement("div",{className:"Twmj7"},x.a.createElement(de.a,{color:"green",icon:"tick",title:"Your registration was successful",className:Ke.a.headerWell}),x.a.createElement(Ze,e))};ze.propTypes={props:B.a.object};var Qe=Object(k.memo)(ze),Je=function(){var e=Er().username,r=mr().alertPreferenceEndpoint,t=Object(We.e)().pushLocation,n={close:Object(k.useCallback)(function(e){Object(Ge.a)(e),window.location.href=Ue.a.home.link},[]),goToLogin:Object(k.useCallback)(function(e){Object(Ge.a)(e),t("/login")()},[t]),preferredContactAddress:r,username:e};return Object(We.f)(function(){Me.a.scrollToY(0,300,"easeInOutQuint"),Object(Ge.c)("register","RegistrationSuccessful")}),x.a.createElement(Qe,n)},Xe=t(1401),$e=t.n(Xe),er=function(e){var r=e.errorType,t=e.close;return x.a.createElement("div",{className:"_2ry9l"},x.a.createElement(de.a,{color:"red",icon:"red-alert",title:"Sorry, you can't register your account",className:$e.a.headerWell}),x.a.createElement("div",{className:"_3ZRRC"},r===ea.TECHNICAL_DIFFICULTIES&&x.a.createElement("p",null,"A technical problem means we can't finish setting up your online account access. Please try again later. For urgent access to your account you can use the Barclaycard or Barclays app if you’ve registered for it, or you can call us."),r===ea.ACCOUNT_NOT_ELIGIBLE&&x.a.createElement("p",null,"This can be for a number of reasons. For help getting online please call us."),r===ea.EXCEEDED_ATTEMPTS&&x.a.createElement("p",null,"You've tried too many times to register for online access to your account. For security reasons you’ll need to call us to continue your registration."),x.a.createElement("ul",null,x.a.createElement("li",null,x.a.createElement("span",{"aria-hidden":"true",className:"telephone-icon _McXs"}),x.a.createElement("strong",null,"0800 161 5300")," (from your landline)"),x.a.createElement("li",null,x.a.createElement("span",{"aria-hidden":"true",className:"telephone-icon _McXs"}),x.a.createElement("strong",null,"+44 (0)333 202 7900")," (outside the UK)"),x.a.createElement("li",{className:"_3sEuy"},x.a.createElement("span",null,"Monday to Friday 8am to 8pm, excluding bank holidays."))),x.a.createElement("p",{className:"_3Gnci"},x.a.createElement(De.a,{link:"callCharges"},"View our call charges")),x.a.createElement(Te.a,{onClick:t,style:"secondary",bdl:!0},"Close")))};er.propTypes={errorType:B.a.string,close:B.a.func,scrollTop:B.a.func};var rr=Object(k.memo)(er),tr=t(270),nr=t(1331),ar=t(18),or=t(3),lr=t.n(or);function cr(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function ir(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?cr(Object(t),!0).forEach(function(r){sr(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):cr(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function sr(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ur(e,r,t,n,a,o,l){try{var c=e[o](l),i=c.value}catch(e){return void t(e)}c.done?r(i):Promise.resolve(i).then(n,a)}var mr=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=gr(),t=r.setScreen,n=r.setErrorType,a=r.setFieldValue,o=r.initialEmailAddress,l=Object(tr.useQueryClient)(),c=Object(tr.useQuery)("contactDetails",function(e){return function(){var r=this,t=arguments;return new Promise(function(n,a){var o=e.apply(r,t);function l(e){ur(o,n,a,l,c,"next",e)}function c(e){ur(o,n,a,l,c,"throw",e)}l(void 0)})}}(regeneratorRuntime.mark(function e(){var r,t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(nr.a)(ar.G);case 2:return r=e.sent,t=r.data,e.abrupt("return",t);case 5:case"end":return e.stop()}},e)})),{enabled:e,retry:!1,staleTime:1/0,cacheTime:1/0,onError:function(e){500===e.response.status&&(n(ea.TECHNICAL_DIFFICULTIES),t(ea.UNABLE_TO_REGISTER))},onSuccess:function(e){var r=e.email,t=void 0===r?"":r;t&&a("emailAddress",t),!o&&t&&a("initialEmailAddress",t)}}),i=c.isLoading,s=c.isError,u=c.isSuccess,m=c.data,d=c.error,p=c.refetch,f=c.status,b=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return lr()(e,"email",r)}(m,""),E=function(e,r){return lr()(e,"maskedMobileNumber",r)}(m,""),h=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return lr()(e,"isPaperless",r)}(m,!1),g=function(e,r){return lr()(e,"alertPreference",r)}(m,""),y=function(e,r){return lr()(e,"customerName",r)}(m,""),v=Object(k.useMemo)(function(){return y.split(" ")[0]},[y]),_=Object(k.useMemo)(function(){return"email"===g?b:E},[g,b,E]),O=Object(tr.useMutation)(function(e){return Object(nr.b)(ar.H,e)},{onSuccess:function(e,r){r.email&&l.setQueryData("contactDetails",function(e){return ir(ir({},e),{},{email:r.email})})}});return{isLoading:i,isError:s,isSuccess:u,data:m,error:d,refetch:p,status:f,firstName:v,customerName:y,email:b,maskedMobileNumber:E,isPaperless:h,updateContactDetails:O,alertPreference:g,alertPreferenceEndpoint:_}};function dr(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function pr(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?dr(Object(t),!0).forEach(function(r){fr(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):dr(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function fr(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function br(e,r,t,n,a,o,l){try{var c=e[o](l),i=c.value}catch(e){return void t(e)}c.done?r(i):Promise.resolve(i).then(n,a)}var Er=function(e){var r=Object(tr.useQuery)("accountDetails",function(e){return function(){var r=this,t=arguments;return new Promise(function(n,a){var o=e.apply(r,t);function l(e){br(o,n,a,l,c,"next",e)}function c(e){br(o,n,a,l,c,"throw",e)}l(void 0)})}}(regeneratorRuntime.mark(function r(){var t,n,a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(nr.b)(ar.K,e);case 2:return t=r.sent,n=t.data,a=t.response,r.abrupt("return",pr(pr({},n),{},{dob:e.dob,status:a.status}));case 6:case"end":return r.stop()}},r)})),{retry:!1,enabled:!1,staleTime:1/0,cacheTime:1/0}),t=r.refetch,n=r.isError,a=r.isLoading,o=r.isSuccess,l=r.error,c=r.data,i=r.isFetching,s=Object(k.useMemo)(function(){if(c){var e=function(e,r){return lr()(e,"accountRegistrationDate",r)}(c,"");return e.length>0?new Date(e).toLocaleDateString("en-GB"):""}return""},[c]),u=function(e,r){return lr()(e,"username",r)}(c,""),m=function(e,r){return lr()(e,"cards",r)}(c,[]),d=function(e){return lr()(e,"customerName","").split(" ")[0]}(c),p=function(e){return lr()(e,"dob","")}(c),f=Object(k.useMemo)(function(){return p.replace(/\//g,"")},[p]);return{isError:n,isLoading:a,isFetching:i,isSuccess:o,error:l,responseCode:function(e,r){return lr()(e,"responseCode",r)}(c,""),accountRegistrationDate:s,username:u,cards:m,firstName:d,dob:p,dobRaw:f,refetch:t}},hr=t(144),gr=function(){var e=Xn(),r=e.state,t=e.dispatch,n=function(e){return e.currentStep}(r),a=function(e){return e.screen}(r),m=function(e){return e.screenOptions}(r),p=function(e){return e.inlineErrors}(r),f=function(e){return e.checklistErrors}(r),b=function(e){return e.topLevelError}(r),E=function(e){return e.errorType}(r),h=function(e){return e.errorCode}(r),g=function(e){return e.values.initialEmailAddress}(r);return{goToNextStep:Object(k.useCallback)(function(e){e&&e.preventDefault(),t({type:o})},[t]),goToPreviousStep:Object(k.useCallback)(function(e){e&&(Object(Ge.a)(e),e.preventDefault()),t({type:l})},[t]),currentStep:n,screen:a,screenOptions:m,inlineErrors:p,checklistErrors:f,topLevelError:b,errorType:E,errorCode:h,initialEmailAddress:g,setScreen:function(e){return t(function(e){return{type:c,payload:{screen:e}}}(e))},setErrorType:function(e){return t(function(e){return{type:s,payload:{errorType:e}}}(e))},setFieldValue:function(e,r){return t(hr.a(e,r))},setAccountDetails:function(e){return t(function(e){return{type:u,payload:e}}(e))},setErrorCode:function(e){return t(function(e){return{type:d,payload:e}}(e))},setTopLevelError:function(e){return t(hr.e(e))},setScreenOptions:function(e){return t(function(e){return{type:i,payload:{screenOptions:e}}}(e))},setInlineError:function(e,r){return t(hr.d(e,r))},setTouched:function(e,r){return t(hr.f(e,r))}}},yr=function(){var e=gr().errorType,r=function(){var e=gr(),r=e.errorType,t=e.errorCode;return{dataLayerInfo:Object(k.useMemo)(function(){var e="None";return r===ea.TECHNICAL_DIFFICULTIES?e="TechnicalError":r===ea.ACCOUNT_NOT_ELIGIBLE?e="AccountUneligible":r===ea.EXCEEDED_ATTEMPTS&&(e="TooManyAttempts"),{page_version:e,event_error_code:t}},[r,t])}}().dataLayerInfo,t=Object(k.useCallback)(function(e){Object(Ge.a)(e),window.location.href=Ue.a.home.link},[]);Object(We.f)(function(){Me.a.scrollToY(0,300,"easeInOutQuint"),Object(Ge.c)("register","CannotRegister",r)});var n={errorType:e,close:t};return x.a.createElement(rr,n)},vr=function(e){return x.a.createElement("div",{className:"Twmj7"},x.a.createElement(de.a,{color:"orange",icon:"orange-alert",title:x.a.createElement("div",null,x.a.createElement("p",null,"There was a problem saving your email marketing preference"),x.a.createElement("p",null,"Your registration was successful, but your email marketing preference could not be saved. Log in below and go to ‘Manage account’ screen in the top menu to set your preference.")),className:Ke.a.headerWell}),x.a.createElement(Ze,e))};vr.propTypes={props:B.a.object};var _r=Object(k.memo)(vr),Or=function(){var e=Er().username,r=mr().alertPreferenceEndpoint,t=Object(We.e)().pushLocation,n={close:Object(k.useCallback)(function(e){Object(Ge.a)(e),window.location.href=Ue.a.home.link},[]),goToLogin:Object(k.useCallback)(function(e){Object(Ge.a)(e),t("/login")()},[t]),preferredContactAddress:r,username:e};return Object(We.f)(function(){Me.a.scrollToY(0,300,"easeInOutQuint"),Object(Ge.c)("register","RegistrationSuccessful")}),x.a.createElement(_r,n)},Tr=(t(1399),{"./style.css":{root:"j4chR",label:"dz6zE",hr:"_37__Z",step:"_37EtG","step--hidden":"_3R57i"}}),Sr=["Account details","Check contact details","Statement preferences","Login details setup"],Cr=function(e){var r=e.currentStep;return x.a.createElement(x.a.Fragment,null,x.a.createElement("hr",{className:"_37__Z"}),x.a.createElement("div",{className:"j4chR","data-id":"steps-ahead"},x.a.createElement("span",{className:"dz6zE"},r===Sr.length?"Last step:":"Steps ahead:"),Sr.map(function(e,t){return r<=t+1&&x.a.createElement("span",{key:e,className:M()(X()("step"),Tr)},r===t+1?x.a.createElement("strong",null,e):e)})))};Cr.propTypes={currentStep:B.a.number.isRequired};var Pr=Object(k.memo)(Cr),Nr=function(e){return x.a.createElement(Pr,e)},Rr=t(115),wr=t.n(Rr);t(1397),t(1395);var Ir={"./progressIndicator.style.css":{progressBarBackground:"_1643g",progressBar:"ijq4T","progressBar--1":"_2M16L","progressBar--2":"_60bZw","progressBar--3":"RDZgg","progressBar--4":"_2eg01",stepNumber:"_1MJWN"}},Ar=function(e){var r=e.step;return x.a.createElement(k.Fragment,null,x.a.createElement("div",{"aria-hidden":!0,className:"_1643g"},x.a.createElement("div",{className:M()(X()("progressBar",function(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}({},"progressBar--".concat(r),!0)),Ir)})),x.a.createElement("span",{className:"_1MJWN"},"Step ",r," of 4"))};Ar.propTypes={step:B.a.number.isRequired};var Lr=Object(k.memo)(Ar),jr=function(e){return x.a.createElement(Lr,e)},Dr=t(1334),kr=(t(1393),function(e){var r=e.onSubmit,t=e.cancel,n=e.currentStep,a=e.parseEvent;return x.a.createElement("form",{onSubmit:r,className:"_1Wjq8"},x.a.createElement("h2",null,"You can register now if you:"),x.a.createElement("ul",{className:"_1jjq_","data-id":"tick-list"},x.a.createElement("li",null,x.a.createElement("span",{className:"green-tick _1skVf","aria-hidden":"true"}),x.a.createElement("span",null,"have your ",x.a.createElement("strong",null,"Barclaycard credit card")," to hand")),x.a.createElement("li",null,x.a.createElement("span",{className:"green-tick _1skVf","aria-hidden":"true"}),x.a.createElement("span",null,"know your ",x.a.createElement("strong",null,"credit limit")," amount")),x.a.createElement("li",null,x.a.createElement("span",{className:"green-tick _1skVf","aria-hidden":"true"}),x.a.createElement("span",null,"are the ",x.a.createElement("strong",null,"main cardholder")))),x.a.createElement("p",null,"It should only take a few moments. Once registered, you'll have immediate access to your Barclaycard account and be able to check your transactions, view your statements, pay your bill and manage your account online securely and easily."),x.a.createElement("p",null,"More than one Barclaycard? You don't need to register each one. Once you’ve registered one card, you'll see all your cards together when you log in."),x.a.createElement(Nr,{currentStep:n}),x.a.createElement(Dr.a,{className:"cWIuW"},x.a.createElement(Te.a,{onClick:t,type:"button",style:"secondary",bdl:!0},"Cancel"),x.a.createElement(Te.a,{type:"submit",onClick:a,bdl:!0},"Start registration")))});kr.propTypes={onSubmit:B.a.func,cancel:B.a.func,currentStep:B.a.number,parseEvent:B.a.func};var xr=kr,Fr=function(){var e=gr(),r=e.currentStep,t={onSubmit:e.goToNextStep,cancel:function(e){Object(Ge.a)(e),window.location.href=Ue.a.home.link},currentStep:r,parseEvent:Ge.a};return Object(We.f)(function(){Me.a.scrollToY(0,300,"easeInOutQuint"),Object(Ge.c)("RegisterNow")}),x.a.createElement(xr,t)},Br=(t(1391),{"./css/Checkbox.css":{root:"_19ofd",checkbox:"OAbhz",label:"_1t6P-","label-suffix":"_1Tpxf","root--error":"_3AL0H"}}),Wr=function(e){var r=e.name,t=e.label,n=e.externalLink,a=e.error,o=e.className,l=e.value,c=e.disabled,i=e.suffix,s=e.onChange,u=e.onBlur,m=e.onFocus,d=X()("root",{"root--error":a});return x.a.createElement("div",{className:(o?o+" ":"")+M()(d,Br)},x.a.createElement("input",{id:r,name:r,className:"OAbhz",checked:l,type:"checkbox",disabled:c,onChange:s,onBlur:u,onFocus:m,"aria-labelledby":"".concat(r,"-label")}),x.a.createElement("label",{htmlFor:r,className:"_1t6P-",id:"".concat(r,"-label")},t,n&&x.a.createElement("a",{className:"bc-external-link",href:n.href,target:"_blank",rel:"noopener noreferrer"},x.a.createElement("span",{className:"link"},n.text),x.a.createElement("span",{className:"sr-only"},"Opens in a new window"),x.a.createElement("span",{className:"icon icon-new-window"}))),i&&x.a.createElement("span",{className:"_1Tpxf"},i))};Wr.propTypes={name:B.a.string.isRequired,label:B.a.string,externalLink:B.a.shape({href:B.a.string,text:B.a.text}),error:B.a.bool,className:B.a.string,value:B.a.bool,disabled:B.a.bool,suffix:B.a.string,onChange:B.a.func,onBlur:B.a.func,onFocus:B.a.func};t(1389);var Mr={"./css/CheckListValidation.css":{root:"_2cz2T",checklist:"_1aPPm",helpText:"_1FjJz",label:"_3SjSX","label--warningText":"_2B8pg",validator:"_3EAyU",warningText:"_1JVZ4","validator--init":"_1Uuyw","validator--invalid":"krZMP","validator--valid":"_3qACn"}},Ur=function(e){var r=e.label,t=e.checklistErrors,n=void 0===t?[]:t,a=e.numErrors;return x.a.createElement(k.Fragment,null,r&&x.a.createElement("p",{"data-id":"checklist-validation-label",className:M()(X()("label",{"label--warningText":a>0}),Mr)},r),x.a.createElement("ul",{className:"_2cz2T _1aPPm"},n.map(function(e){return x.a.createElement("li",{key:e.label,className:M()(X()("validator",{"validator--init":void 0===e.valid,"validator--valid":!0===e.valid,"validator--invalid":!1===e.valid}),Mr)},x.a.createElement("span",{"aria-hidden":"true",className:X()({"green-tick":!0===e.valid,"icon-warning":!1===e.valid})}),e.label)})))};Ur.propTypes={label:B.a.string,checklistErrors:B.a.array,numErrors:B.a.number};var Hr=t(344),Gr=t.n(Hr),Yr=(t(1387),function(e){var r=e.name,t=e.errorOrWarning,n=e.className,a=e.pattern,o=void 0===a?/.*/:a;return x.a.createElement(Gr.a,{className:(n?n+" ":"")+"_1lyBb","aria-live":"polite",id:r+"-error","data-id":"error"},t&&o.test(t)&&x.a.createElement("span",null,t))});Yr.propTypes={name:B.a.string.isRequired,errorOrWarning:B.a.string,className:B.a.string,pattern:B.a.any};t(1385);var qr=function(e){var r=e.name,t=e.helpText,n=e.className;return x.a.createElement(Gr.a,{className:(n?n+" ":"")+"_3yh5Q","aria-live":"polite",id:r+"-help"},x.a.createElement("span",null,t))};qr.propTypes={name:B.a.string.isRequired,helpText:B.a.string,className:B.a.string};t(1383);function Kr(){return(Kr=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function Vr(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Zr={"./css/InputBox.css":{inputBoxRoot:"_4_E-k","input--has-error":"_1leEa","input--has-lefthand-icon":"_36nis","inputBoxRoot--noStyling":"_2D1VE","inputBoxRoot--disabled":"_1NYNp","input--monospace":"UqGYx",twoDigit:"_2FCnC",fourDigit:"_2mKfx",dotsFont:"_3nRGH",fontNormal:"_2sWZY","inputBoxRoot--error":"RFZKq"}},zr=function(e){var r=e.name,t=e.type,n=void 0===t?"text":t,a=e.useMonospace,o=e.className,l=e.onChange,c=e.onBlur,i=e.value,s=e.hasError,u=e.style,m=e.underlinePlaceholders,d=e.noStyling,p=e.inputWrapProps,f=e.tabIndex,b=e.autoTabOnLength,E=e.doAutoTab,h=e.isMulti,g=e.maxLength,y=e.placeholder,v=e.width,_=e.autocomplete,O=e.hasLeftHandIcon,T=e.onFocus,S=e.onPaste,C=e.onKeyDown,P=e.customStyleName,N=e.disabled,R=e.ariaAttributes;return x.a.createElement("div",Kr({},p,{className:(o?o+" ":"")+M()(X()("inputBoxRoot",Vr({"inputBoxRoot--error":s,"inputBoxRoot--disabled":N,"inputBoxRoot--noStyling":d},v,v)),Zr)}),x.a.createElement("input",Kr({id:r,disabled:N,name:r,value:i,type:n,maxLength:g,style:u,placeholder:y,autoComplete:_,tabIndex:f},R,{"data-multi":h,onChange:l,onBlur:c,onFocus:T,onPaste:S,onKeyDown:C,onKeyUp:function(e){b&&E(e,i)},className:M()(X()(Vr({"input--has-error":s,"input--has-lefthand-icon":O,"input--monospace":a},P,P)),Zr)})),m&&x.a.createElement(yt,{amountOfPlaceholders:m,amountOfEnteredCharacters:i?i.length:0,error:s}))};zr.propTypes={name:B.a.string,type:B.a.string,className:B.a.string,useMonospace:B.a.bool,onChange:B.a.func,onBlur:B.a.func,onFocus:B.a.func,onPaste:B.a.func,onKeyDown:B.a.func,value:B.a.string,hasError:B.a.bool,style:B.a.object,underlinePlaceholders:B.a.number,noStyling:B.a.bool,inputWrapProps:B.a.object,tabIndex:B.a.number,autoTabOnLength:B.a.number,doAutoTab:B.a.func,isMulti:B.a.bool,maxLength:B.a.string,placeholder:B.a.string,width:B.a.string,autocomplete:B.a.string,hasLeftHandIcon:B.a.bool,customStyleName:B.a.string,disabled:B.a.bool,ariaAttributes:B.a.object},zr.propTypes={};t(1381);var Qr=function(e){var r=e.children,t=e.className,n=e.dataId;return x.a.createElement("div",{className:(t?t+" ":"")+"_1xwQH","data-id":n},r)};Qr.propTypes={children:B.a.node,className:B.a.string,dataId:B.a.string};t(1379);var Jr={"./css/Label.css":{label:"V47z2","label--disabled":"i5zQY"}},Xr=function(e){var r=e.htmlFor,t=e.name,n=e.label,a=e.disabled,o=e.className;return x.a.createElement("label",{htmlFor:r||t,id:"".concat(t,"-label"),disabled:a,className:(o?o+" ":"")+M()(X()("label",{"label--disabled":a}),Jr)},n)};Xr.propTypes={name:B.a.string.isRequired,label:B.a.string.isRequired,htmlFor:B.a.string,disabled:B.a.bool,className:B.a.string};t(1377);var $r={"./css/LeftHandIcon.css":{leftHandIcon:"b-q8S","leftHandIcon--error":"_3I7qd"}},et=function(e){var r=e.iconName,t=e.hasError,n=e.className;return 1===r.length?x.a.createElement("span",{className:(n?n+" ":"")+M()(X()("leftHandIcon",{"leftHandIcon--error":t}),$r)},r):r?x.a.createElement(wr.a,{bsClass:"icon",glyph:r,className:("".concat(r,"-icon ").concat(n)?"".concat(r,"-icon ").concat(n)+" ":"")+"b-q8S","aria-hidden":"true"}):void 0};et.propTypes={iconName:B.a.string,hasError:B.a.bool,className:B.a.string};var rt=t(271),tt=(t(1375),{"./css/MultiInput.css":{root:"_3YRIo","root--singleInputStyle":"_i_qS","root--fauxFocus":"_2DDi4","root--fauxDisabled":"ivBsA","root--fauxError":"_1T46q","root--textCentered":"_2QNk5",inputWrap:"_2NDCE",delimiter:"_3U1VT"}}),nt=function(e){var r=e.name,t=e.children,n=e.className,a=e.delimiter,o=e.numPopulatedInputs,l=e.singleInputStyle,c=e.childHasFocus,i=e.disabled,s=e.textCentered,u=e.shouldClearSelf,m=e.hasError,d=e.onFocus,p=e.onBlur,f=e.clearSelf,b=Xn().state,E=X()("root",{"root--singleInputStyle":l,"root--fauxFocus":c,"root--fauxDisabled":l&&i,"root--fauxError":l&&m,"root--textCentered":s});return Object(rt.b)(function(){u&&f()}),x.a.createElement("div",{className:(n?n+" ":"")+M()(E,tt)},x.a.Children.map(t,function(e,t){return x.a.createElement("div",{className:"_2NDCE"},a&&t>0&&!l&&x.a.createElement("div",{className:"_3U1VT"},x.a.createElement("span",null,a)),x.a.createElement("div",{className:"_2NDCE"},x.a.cloneElement(e,{name:"".concat(r,"_").concat(t,"_").concat(e.props.name),id:"".concat(r,"_").concat(t,"_").concat(e.props.name),tabIndex:t>o?-1:0,noStyling:l,onFocus:d,onBlur:function(r){p(r),e.props.onBlur(r)},ariaLabelledBy:"".concat(r,"-label"),ariaDescribedBy:"".concat(r,"-error ").concat(r,"-help"),inputWrapProps:l&&{style:{marginLeft:0===t?"0":"-40px"}},value:b.values["".concat(r,"_").concat(t,"_").concat(e.props.name)],isMulti:!0,parentName:r,hasError:m})))}))};nt.propTypes={name:B.a.string,children:B.a.node,className:B.a.string,delimiter:B.a.string,numPopulatedInputs:B.a.number,singleInputStyle:B.a.bool,childHasFocus:B.a.bool,disabled:B.a.bool,textCentered:B.a.bool,shouldClearSelf:B.a.bool,hasError:B.a.bool,onFocus:B.a.func,onBlur:B.a.func,clearSelf:B.a.func};t(1373);var at={"./css/Radio.css":{root:"_1LYz5","root--block":"_3j4nc",optionWrap:"_15etD",option:"_1vAd6","option--fauxChecked":"_2NSMB",option_label:"_3pnc-","option_label--main":"_82Pa8","option_label--sub":"_2R1TK",option_input:"_1rCtv","option--short":"_1X47K",option_componentWrap:"_3kolW",horizontal:"_1-XJG",vertical:"_33izr","option--error":"_1dBVv","label-button":"JWK67",label:"_3LH9Y","label--radio":"uaXlD","root--error":"_22qNN",input:"_1wtcQ"}},ot=function(e){var r=e.name,t=e.value,n=e.label,a=e.options,o=e.hasError,l=e.onChange,c=e.disabled,i=X()("root",{"root--error":o});return x.a.createElement("fieldset",{className:M()(i,at)},x.a.createElement("legend",{className:"_3LH9Y uaXlD"},n),a.map(function(e){var n=e.value,a=e.label;return x.a.createElement("div",{key:n,className:"_15etD"},x.a.createElement(lt,{parentName:r,value:n,label:a,onChange:l,isChecked:t===n,disabled:c}))}))};ot.propTypes={name:B.a.string,value:B.a.string,label:B.a.string,options:B.a.array,hasError:B.a.bool,onChange:B.a.func,disabled:B.a.bool};var lt=function(e){var r=e.parentName,t=e.value,n=e.label,a=e.disabled,o=e.isChecked,l=e.onChange,c=X()("option");return x.a.createElement("div",{className:M()(c,at)},x.a.createElement("input",{type:"radio",value:t,id:t,className:"_1rCtv",checked:o,onChange:l,disabled:a,onClick:function(){return l(r,t)}}),x.a.createElement("label",{htmlFor:t,className:"_3pnc-",id:"".concat(t,"-label")},x.a.createElement(Pe.a,{onClick:function(){return l(r,t)},showUnderline:!1,disabled:a,className:"JWK67"},x.a.createElement("span",{className:"_82Pa8"},n))))};lt.propTypes={parentName:B.a.string,value:B.a.string,label:B.a.string,disabled:B.a.bool,isChecked:B.a.bool,onChange:B.a.func};t(1371);var ct=function(e){var r=e.children,t=e.className;return x.a.createElement("div",{className:(t?t+" ":"")+"_2RIky"},r)};ct.propTypes={children:B.a.node,className:B.a.string};t(1369);function it(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var st={"./css/RightHandIcon.css":{rightHandIcon:"_1Rhkq",bgIcon:"_12JQl","rightHandIcon--mounted":"_1mMOs","icon--cyan":"_3rbNZ","icon--green":"_2Wrn0","icon--red":"nisZU",cvv:"_3Wmbd"}};function ut(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var n,a,o=[],l=!0,c=!1;try{for(t=t.call(e);!(l=(n=t.next()).done)&&(o.push(n.value),!r||o.length!==r);l=!0);}catch(e){c=!0,a=e}finally{try{l||null==t.return||t.return()}finally{if(c)throw a}}return o}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return mt(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return mt(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mt(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var dt=["warning","tick"],pt={warning:"red",tick:"green"},ft=["cvv"],bt=function(e){var r,t=e.type,n=e.styles,a=e.className,o=ut(Object(k.useState)(!1),2),l=o[0],c=o[1];return Object(k.useEffect)(function(){var e=setTimeout(function(){return c(!0)},0);return function(){return clearInterval(e)}},[]),x.a.createElement(k.Fragment,null,dt.includes(t)&&x.a.createElement(wr.a,{bsClass:"icon",glyph:t,className:(X()("icon","".concat(t,"-icon"),it({},a,a))?X()("icon","".concat(t,"-icon"),it({},a,a))+" ":"")+M()(X()("rightHandIcon",(r={},it(r,"icon--".concat(pt[t]),!0),it(r,"rightHandIcon--mounted",l),r)),st)}),ft.includes(t)&&x.a.createElement("span",{"aria-hidden":"true",style:n,className:(X()("".concat(t),it({},a,a))?X()("".concat(t),it({},a,a))+" ":"")+M()(X()("bgIcon"),st)}))};bt.propTypes={type:B.a.oneOf(["warning","cvv","tick"]),styles:B.a.object,className:B.a.string};t(1367);var Et={"./css/ShowHide.css":{showHide:"_25pAC","showHide--iconPadding":"_2G5IH","showHide--error":"_2WBTZ"}},ht=function(e){var r=e.hide,t=e.toggleShowHide,n=e.iconPadding,a=e.className,o=e.hasError,l=X()("showHide",{"showHide--iconPadding":n,"showHide--error":o});return x.a.createElement("button",{type:"button",onClick:t,className:(a?a+" ":"")+M()(l,Et)},r?"show":"hide")};ht.propTypes={hide:B.a.bool,toggleShowHide:B.a.func,iconPadding:B.a.bool,className:B.a.string,hasError:B.a.bool};t(1365);var gt={"./css/UnderlinePlaceholders.css":{underlinePlaceholderWrap:"_2Gy-V",underlinePlaceholder:"_3x8vz","underlinePlaceholder--error":"_3ZUV2","underlinePlaceholder--hidden":"Iz1YV"}},yt=function(e){var r=e.amountOfPlaceholders,t=e.amountOfEnteredCharacters,n=e.error,a=e.className;return x.a.createElement("div",{className:(a?a+" ":"")+"_2Gy-V"},Array(r).fill().map(function(e,r){return x.a.createElement("span",{key:"inputName_underlinePlaceholder_".concat(r),className:M()(X()("underlinePlaceholder",{"underlinePlaceholder--hidden":t>=r+1,"underlinePlaceholder--error":n}),gt)})}))};yt.propTypes={amountOfPlaceholders:B.a.number.isRequired,amountOfEnteredCharacters:B.a.number.isRequired,error:B.a.any,className:B.a.string};var vt=["clearSelf"];function _t(){return(_t=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function Ot(e,r){if(null==e)return{};var t,n,a=function(e,r){if(null==e)return{};var t,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],r.indexOf(t)>=0||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var Tt=function(e){var r=e.clearSelf,t=Ot(e,vt),n=Object(k.useCallback)(function(e,r){if(9!==e.keyCode&&16!==e.keyCode&&37!==e.keyCode&&39!==e.keyCode){var n=t.autoTabOnLength,a=t.name.split("_"),o=document.querySelector("[id^=".concat(a[0],"_").concat(Number(a[1])+1,"]"));o&&n===r.length&&o.focus()}},[t]);Object(rt.b)(function(){r&&r(t.name)});var a=Object(k.useMemo)(function(){return t.name.split("_")[0]},[t.name]),o={doAutoTab:n,ariaAttributes:{"aria-describedby":"".concat(a,"-error ").concat(a,"-help"),"aria-labelledby":"".concat(a,"-label"),"aria-invalid":t.hasError}};return x.a.createElement(zr,_t({},t,o))};Tt.propTypes={name:B.a.string,clearSelf:B.a.func,hasError:B.a.bool,autoTabOnLength:B.a.number};var St=Tt;function Ct(){return(Ct=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function Pt(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var n,a,o=[],l=!0,c=!1;try{for(t=t.call(e);!(l=(n=t.next()).done)&&(o.push(n.value),!r||o.length!==r);l=!0);}catch(e){c=!0,a=e}finally{try{l||null==t.return||t.return()}finally{if(c)throw a}}return o}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return Nt(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Nt(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nt(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var Rt=function(e){var r=Pt(Object(k.useState)(!1),2),t=r[0],n=r[1],a=Object(k.useCallback)(function(){return Array.prototype.slice.call(document.querySelectorAll("[id^='".concat(e.name,"_']")))},[e.name]),o={onFocus:Object(k.useCallback)(function(){var e=a();0===e.filter(function(e){return""!==e.value}).length&&e[0].focus(),n(!0)},[a,n]),onBlur:Object(k.useCallback)(function(){n(!1)},[n]),numPopulatedInputs:a().filter(function(e){return""!==e.value}).length,childHasFocus:t};return x.a.createElement(nt,Ct({},e,o))};Rt.propTypes={name:B.a.string};var wt=Rt,It=(t(1363),{"./style.css":{root:"_2Lp0Z",hr:"_3WeEi",privacyPolicy:"_2DTSc",contactYouCheckbox:"_1a15r",checkbox:"K3Zqb",emailAddress:"_3G85h",confirmEmail:"_2eVB7",mobilePhone:"_3sELf","root--email-only":"U2EaI",test:"_1yGOH"}}),At=function(e){var r=e.values,t=e.initialEmailValue,n=e.maskedMobileNumber,a=e.showConfirmEmail,o=e.prevent,l=e.inlineErrors,c=e.emailMatchesConfirm,i=e.isLoading,s=e.isSubmitting,u=e.customerFirstName,m=e.currentStep,d=e.emailOnly,p=e.goToPreviousStep,f=e.onFieldChange,b=e.onFieldBlur,E=e.onSubmit,h=e.onConfirmEmailChange,g=e.parseEvent;return x.a.createElement("form",{onSubmit:E,className:M()(X()("root",{"root--email-only":d}),It)},x.a.createElement("h2",null,"Check contact details"),i?x.a.createElement($.a,null):x.a.createElement(k.Fragment,null,x.a.createElement("p",null,"Hello ",u,","),x.a.createElement("p",null,"Please check and update your details below."),!t&&x.a.createElement("p",null,"We'll use these details if we need to reach you about your account and for any alerts and notifications you set up."),x.a.createElement(Qr,{className:"_3G85h"},x.a.createElement(Xr,{name:"emailAddress",label:"Email address"}),x.a.createElement(Yr,{errorOrWarning:l.emailAddress,name:"emailAddress"}),x.a.createElement(ct,null,x.a.createElement(St,{name:"emailAddress",type:"text",autocomplete:"off",hasError:!!l.emailAddress,onChange:f,onBlur:b,value:r.emailAddress,disabled:s,maxLength:"128"}),l.emailAddress&&x.a.createElement(bt,{type:"warning"}),c&&x.a.createElement(bt,{type:"tick"}))),a&&x.a.createElement(k.Fragment,null,x.a.createElement(Qr,{className:"_2eVB7"},x.a.createElement(Xr,{name:"confirmEmailAddress",label:"Confirm email address"}),x.a.createElement(Yr,{errorOrWarning:l.confirmEmailAddress,name:"confirmEmailAddress"}),x.a.createElement(ct,null,x.a.createElement(St,{name:"confirmEmailAddress",type:"text",onPaste:o,autocomplete:"off",hasError:!!l.confirmEmailAddress,onChange:h,onBlur:b,value:r.confirmEmailAddress,disabled:s,maxLength:"128"}),l.confirmEmailAddress&&x.a.createElement(bt,{type:"warning"}),c&&x.a.createElement(bt,{type:"tick"}))),x.a.createElement("div",{className:"_1a15r"},x.a.createElement(Wr,{name:"marketingPreferenceEmail",label:"Tick this box to stay in touch with Barclaycard by email. From time to time, we’ll send you information about special offers, along with updates about products and services – both from us and our selected partners.",className:"K3Zqb",onChange:f,value:r.marketingPreferenceEmail,disabled:s}))),n&&x.a.createElement(Qr,null,x.a.createElement(Xr,{name:"mobilePhone",label:"Mobile phone number",disabled:!0}),x.a.createElement(Yr,{errorOrWarning:l.mobilePhone,name:"mobilePhone"}),x.a.createElement(St,{name:"mobilePhone",type:"text",value:n,onChange:f,disabled:!0,className:"_3sELf"}),x.a.createElement(qr,{helpText:"Out of date mobile number? Don't worry, you can update it online on the 'Manage account' page, once you've registered or by calling us.",name:"mobilePhone"})),x.a.createElement("hr",{className:"_3WeEi"}),x.a.createElement("div",{className:"_2DTSc"},x.a.createElement("h3",null,"Privacy Policy"),x.a.createElement("p",null,"We'll use your contact details if we need to get in touch with you about managing your account, and where it's necessary for us to meet our legal and regulatory obligations. We may also share them with other trusted organisations."),x.a.createElement("p",null,"You can choose whether to receive information about our products and services anytime you log in to your account on the 'Manage account' page."),x.a.createElement("p",null,"For more information"," ",x.a.createElement(De.a,{link:"privacyPolicy"},"read our Privacy Policy here"),".")),x.a.createElement(Nr,{currentStep:m}),!i&&x.a.createElement(Dr.a,null,x.a.createElement(Te.a,{type:"button",style:"secondary",onClick:p,disabled:s,bdl:!0},"Back"),x.a.createElement(Te.a,{type:"submit",loading:s,disabled:s,onClick:g,bdl:!0},"Next"))))};At.propTypes={values:B.a.any,initialEmailValue:B.a.string,maskedMobileNumber:B.a.string,showConfirmEmail:B.a.bool,prevent:B.a.func,inlineErrors:B.a.shape({emailAddress:B.a.string,confirmEmailAddress:B.a.string,mobilePhone:B.a.string}),emailMatchesConfirm:B.a.bool,isLoading:B.a.bool,isSubmitting:B.a.bool,emailOnly:B.a.bool,customerFirstName:B.a.string,currentStep:B.a.number,goToPreviousStep:B.a.func,onFieldChange:B.a.func,onFieldBlur:B.a.func,onSubmit:B.a.func,onConfirmEmailChange:B.a.func,parseEvent:B.a.func};var Lt=Object(k.memo)(At),jt=t(280),Dt=t(51),kt={emailAddress:[function(e){return Dt.h("Invalid email. Please check")(e)},function(e){return Dt.B("Please enter your email address")(e)}],confirmEmailAddress:[function(e,r){if(e!==r.values.emailAddress)return"This does not match your previous entry. Please check and try again"},function(e){return Dt.B("Please confirm your email address")(e)}]},xt=function(e,r,t){return e===r?{requestType:ea.ACKNOWLEDGE}:{requestType:ea.UPDATE,email:e,marketingPreferenceEmail:t}};function Ft(e,r,t,n,a,o,l){try{var c=e[o](l),i=c.value}catch(e){return void t(e)}c.done?r(i):Promise.resolve(i).then(n,a)}var Bt=function(){var e=gr(),r=e.inlineErrors,t=e.setErrorCode,n=e.setScreen,a=e.setErrorType,o=e.setScreenOptions,l=e.goToNextStep,c=e.setInlineError,i=e.setTouched,s=e.initialEmailAddress,u=Xn(),m=u.state,d=u.dispatch,p=mr(!1),f=p.updateContactDetails,b=p.maskedMobileNumber,E=p.isPaperless,h=Object(We.c)({state:m,dispatch:d,validators:kt}),g=h.onFieldChange,y=h.onFieldBlur,v=h.clearSelf,_=h.hasError,O=h.validateFieldList,T=h.validateField,S=h.resetAllTouched,C=function(e){return e.values.emailAddress}(m),P=function(e){return e.values.confirmEmailAddress}(m),N=function(e){return e.values.marketingPreferenceEmail}(m);Object(k.useEffect)(function(){T("confirmEmailAddress",P)},[C,T,P]);var R=Object(k.useMemo)(function(){return C!==s||""===C},[C,s]),w=Object(k.useMemo)(function(){return!R&&!b},[R,b]),I=Object(k.useMemo)(function(){return R?["emailAddress","confirmEmailAddress"]:["emailAddress"]},[R]),A=Object(k.useMemo)(function(){return C===P&&""!==C&&!r.emailAddress},[C,P,r.emailAddress]),L=Object(k.useCallback)(function(e){var r=e.response.status;500!==r&&400!==r||(t(r),a(ea.TECHNICAL_DIFFICULTIES),n(ea.UNABLE_TO_REGISTER))},[t,n,a]),j=function(e){if(204===e.response.status)return o(function(e,r,t){switch(!0){case e&&r&&t:return ea.IS_PAPERLESS_CHOOSE_ALERT;case e&&r&&!t:return ea.NOT_PAPERLESS_CHOOSE_ALERT;case e&&!r&&t:return ea.IS_PAPERLESS_ALERT_CONFIRM;case e&&!r&&!t:return ea.NOT_PAPERLESS_ALERT_CONFIRM;default:return""}}(C,b,E)),l()},D=function(){var e=function(e){return function(){var r=this,t=arguments;return new Promise(function(n,a){var o=e.apply(r,t);function l(e){Ft(o,n,a,l,c,"next",e)}function c(e){Ft(o,n,a,l,c,"throw",e)}l(void 0)})}}(regeneratorRuntime.mark(function e(r){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),!(O(I).length>0)){e.next=4;break}return Object(jt.a)('[data-id*="error"]:not(:empty)',100),e.abrupt("return");case 4:return t=xt(C,s,N),e.prev=5,e.next=8,f.mutateAsync(t);case 8:n=e.sent,j(n),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),L(e.t0);case 15:case"end":return e.stop()}},e,null,[[5,12]])}));return function(r){return e.apply(this,arguments)}}(),x=Object(k.useCallback)(function(e){var r=!0;return function(e,r){return 0===e.indexOf(r)}(C,e.target.value)&&(c("confirmEmailAddress",void 0),r=!1),i("confirmEmailAddress",r),g(e,r)},[g,C,c,i]);return{onSubmit:D,isSubmitting:f.isLoading,showConfirmEmailField:R,emailMatchesConfirm:A,emailOnly:w,inlineErrors:r,onConfirmEmailChange:x,onFieldChange:g,onFieldBlur:y,clearSelf:v,hasError:_,validateFieldList:O,validateField:T,resetAllTouched:S,values:{emailAddress:C,confirmEmailAddress:P,marketingPreferenceEmail:N}}},Wt=function(){var e=mr(),r=e.isLoading,t=e.status,n=e.firstName,a=e.email,o=e.maskedMobileNumber,l=Bt(),c=l.onSubmit,i=l.onFieldBlur,s=l.onFieldChange,u=l.showConfirmEmailField,m=l.emailMatchesConfirm,d=l.emailOnly,p=l.onConfirmEmailChange,f=l.resetAllTouched,b=l.inlineErrors,E=l.values,h=l.isSubmitting,g=function(){var e=mr(!1),r=e.email,t=e.maskedMobileNumber;return{dataLayerInfo:Object(k.useMemo)(function(){var e="None";return r&&t?e="Both":r?e="EmailOnly":t&&(e="MobileOnly"),{page_version:e}},[t,r])}}().dataLayerInfo,y=gr(),v=y.currentStep,_=y.goToPreviousStep,O=Object(We.g)().prevent;Object(k.useEffect)(function(){Me.a.scrollToY(0,300,"easeInOutQuint"),f()},[]),Object(k.useEffect)(function(){"success"===t&&Object(Ge.c)("register","CheckContactDetails",g)},[t]);var T={isLoading:r,isSubmitting:h,values:E,initialEmailValue:a,customerFirstName:n,inlineErrors:b,showConfirmEmail:u,emailMatchesConfirm:m,maskedMobileNumber:o,currentStep:v,emailOnly:d,goToPreviousStep:_,prevent:O,onFieldChange:s,onFieldBlur:i,onSubmit:c,onConfirmEmailChange:p,parseEvent:Ge.a};return x.a.createElement(Lt,T)},Mt=t(509),Ut=(t(1361),function(e){var r=e.onFieldChange,t=e.onFieldBlur,n=e.values,a=e.inlineErrors,o=e.topLevelError,l=e.currentStep,c=e.singleInputCardNumber,i=e.clearSelf,s=e.goToPreviousStep,u=e.onSubmit,m=e.isSubmitting,d=e.hasError,p=e.parseEvent,f=e.onCardNumberChange,b=e.stopNumFieldKeyEvents;return x.a.createElement("form",{className:"_24xhS",onSubmit:u},x.a.createElement("h2",null,"Account details"),o&&!o.invisible&&x.a.createElement(Mt.a,{title:o.title,message:o.message,errorList:[],scrollOnMount:!1,bdl:!0}),x.a.createElement(Qr,{className:"H8IDD"},x.a.createElement(Xr,{htmlFor:c?"cardNumber":"cardNumber_0_first",name:"cardNumber",label:"Card Number"}),x.a.createElement(qr,{helpText:"16-digit number on the front of the Barclaycard you want to register",name:"cardNumber"}),x.a.createElement(Yr,{errorOrWarning:a.cardNumber,name:"cardNumber"}),c?x.a.createElement(St,{name:"cardNumber",type:"number",autocomplete:"off",hasError:d("cardNumber"),useMonospace:!0,onChange:f,onBlur:t,value:n.cardNumber,disabled:m,onKeyDown:b}):x.a.createElement(k.Fragment,null,x.a.createElement(wt,{singleInputStyle:!0,name:"cardNumber",hasError:d("cardNumber"),disabled:m},x.a.createElement(St,{type:"number",name:"first",disabled:m,underlinePlaceholders:4,autoTabOnLength:4,useMonospace:!0,style:{width:"103px"},onChange:r,onBlur:t,onKeyDown:b}),x.a.createElement(St,{type:"number",name:"second",disabled:m,underlinePlaceholders:4,autoTabOnLength:4,useMonospace:!0,style:{width:"103px"},onChange:r,onBlur:t,onKeyDown:b}),x.a.createElement(St,{type:"number",name:"third",disabled:m,underlinePlaceholders:4,autoTabOnLength:4,useMonospace:!0,style:{width:"103px"},onChange:r,onBlur:t,onKeyDown:b}),x.a.createElement(St,{type:"number",name:"fourth",disabled:m,underlinePlaceholders:4,autoTabOnLength:4,useMonospace:!0,style:{width:"103px"},onChange:r,onBlur:t,onKeyDown:b})),d("cardNumber")&&x.a.createElement(bt,{type:"warning"}))),x.a.createElement(Qr,null,x.a.createElement(Xr,{htmlFor:"cardExpiryDate_0_month",name:"cardExpiryDate",label:"Card expiry date"}),x.a.createElement(Yr,{errorOrWarning:a.cardExpiryDate,name:"cardExpiryDate"}),x.a.createElement(wt,{name:"cardExpiryDate",textCentered:!0,delimiter:"/",hasError:d("cardExpiryDate")},x.a.createElement(St,{type:"number",name:"month",placeholder:"mm",autoTabOnLength:2,width:"twoDigit",autocomplete:"off",onChange:r,onBlur:t,disabled:m,onKeyDown:b}),x.a.createElement(St,{type:"number",name:"year",placeholder:"yy",autoTabOnLength:2,width:"twoDigit",autocomplete:"off",onChange:r,onBlur:t,disabled:m,onKeyDown:b}))),x.a.createElement(Qr,null,x.a.createElement(Xr,{name:"challengeC",label:"Card security code (CVV/CVC number)"}),x.a.createElement(qr,{helpText:"The last 3 numbers on the back of your card",name:"challengeC"}),x.a.createElement(Yr,{errorOrWarning:a.challengeC,name:"challengeC"}),x.a.createElement(St,{name:"challengeC",type:"password",autocomplete:"off",useMonospace:!0,style:{width:"86px"},underlinePlaceholders:3,hasError:d("challengeC"),clearSelf:i,onChange:r,onBlur:t,disabled:m,value:n.challengeC,onKeyDown:b}),x.a.createElement(bt,{type:"cvv",styles:{left:"103px",bottom:"9px"}})),x.a.createElement(Qr,null,x.a.createElement(Xr,{name:"creditLimit",label:"Credit limit on this card"}),x.a.createElement(qr,{helpText:"You can find this on your latest statement or on the letter that came with your card",name:"creditLimit"}),x.a.createElement(Yr,{errorOrWarning:a.creditLimit,name:"creditLimit"}),x.a.createElement(ct,null,x.a.createElement(St,{name:"creditLimit",type:"text",autocomplete:"off",hasLeftHandIcon:!0,hasError:d("creditLimit"),onChange:r,onBlur:t,value:n.creditLimit,disabled:m}),x.a.createElement(et,{iconName:"£",hasError:d("creditLimit")}),d("creditLimit")&&x.a.createElement(bt,{type:"warning"}))),x.a.createElement(Qr,null,x.a.createElement(Xr,{htmlFor:"dob_0_day",name:"dob",label:"Date of birth"}),x.a.createElement(Yr,{errorOrWarning:a.dob,name:"dob"}),x.a.createElement(wt,{name:"dob",textCentered:!0,delimiter:"/",hasError:d("dob")},x.a.createElement(St,{type:"number",name:"day",placeholder:"dd",autoTabOnLength:2,width:"twoDigit",autoComplete:"off",onChange:r,onBlur:t,disabled:m,onKeyDown:b}),x.a.createElement(St,{type:"number",name:"month",placeholder:"mm",autoTabOnLength:2,width:"twoDigit",autoComplete:"off",onChange:r,onBlur:t,disabled:m,onKeyDown:b}),x.a.createElement(St,{type:"number",name:"year",placeholder:"yyyy",autoTabOnLength:4,width:"fourDigit",autoComplete:"off",onChange:r,onBlur:t,disabled:m,onKeyDown:b}))),x.a.createElement(Nr,{currentStep:l}),x.a.createElement(Dr.a,null,x.a.createElement(Te.a,{type:"button",style:"secondary",onClick:s,disabled:m,bdl:!0},"Back"),x.a.createElement(Te.a,{type:"submit",loading:m,disabled:m,onClick:p,bdl:!0},"Next")))});Ut.propTypes={onFieldChange:B.a.func,onFieldBlur:B.a.func,values:B.a.any,inlineErrors:B.a.shape({cardNumber:B.a.string,cardExpiryDate:B.a.string,dob:B.a.string,challengeC:B.a.string,creditLimit:B.a.string}),topLevelError:B.a.shape({title:B.a.string,message:B.a.string,invisible:B.a.bool}),currentStep:B.a.number,singleInputCardNumber:B.a.bool,clearSelf:B.a.func,goToPreviousStep:B.a.func,onSubmit:B.a.func,isSubmitting:B.a.bool,hasError:B.a.func,parseEvent:B.a.func,onCardNumberChange:B.a.func,stopNumFieldKeyEvents:B.a.func};var Ht=Object(k.memo)(Ut),Gt=t(598),Yt=t(21),qt={dob_0_day:Yt.h,dob_1_month:Yt.h,dob_2_year:Yt.j,cardNumber_0_first:Yt.j,cardNumber_1_second:Yt.j,cardNumber_2_third:Yt.j,cardNumber_3_fourth:Yt.j,cardNumber:Yt.f,cardExpiryDate_0_month:Yt.h,cardExpiryDate_1_year:Yt.h,creditLimit:Yt.p,challengeC:Yt.c([Yt.i,Yt.o])},Kt={cardNumber:[function(e){return Dt.l(e,"The card number is incorrect. Please check it and try again.")},function(e){return Dt.k("This isn’t a valid Barclaycard number. Your card number will start with 4929 or 5301.  Please check and try again.")(e)},function(e){return Dt.j(16,"Please complete the card number")(e)},function(e){return Dt.B("Please enter the card number")(e)}],cardExpiryDate:[function(e){var r=parseInt(e.substring(0,2)),t=parseInt(e.substring(2,4));return Dt.f("Invalid card expiry date. Please check")(1,r,t)},function(e){var r=e.substring(0,2);return Dt.w("Invalid month. Please check")(r)},function(e){return Dt.j(4,"Please complete the card expiry date")(e)},function(e){return Dt.B("Please enter the card expiry date")(e)}],creditLimit:[function(e){return Dt.B("Please enter the credit limit")(e)}],challengeC:[function(e){return Dt.B("Please enter the card security code")(e)},function(e){return Dt.j(3,"Please complete the card security code")(e)}],dob:[function(e){var r=e.substring(0,2),t=e.substring(2,4),n=e.substring(4,8);return void 0!==Dt.a("Invalid date of birth. Please check",18,104)(r,t,n)?"Invalid date of birth. Please check":void 0!==Dt.D("Invalid year. Please check",1900)(n)?"Invalid year. Please check":void 0!==Dt.w("Invalid month. Please check")(t)?"Invalid month. Please check":void 0!==Dt.g("Invalid day. Please check")(r,t)?"Invalid day. Please check":void 0},function(e){return Dt.B("Please enter your date of birth")(e)},function(e){return Dt.j(8,"Please complete your date of birth")(e)}]};function Vt(e,r,t,n,a,o,l){try{var c=e[o](l),i=c.value}catch(e){return void t(e)}c.done?r(i):Promise.resolve(i).then(n,a)}var Zt=function(){var e=gr(),r=e.inlineErrors,t=e.setFieldValue,n=e.goToNextStep,a=e.topLevelError,o=e.setErrorCode,l=e.setScreen,c=e.setErrorType,i=e.setTopLevelError,s=Xn(),u=s.state,m=s.dispatch,d=Object(We.c)({state:u,dispatch:m,validators:Kt,normalizers:qt}),p=d.clearSelf,f=d.onFieldChange,b=d.onFieldBlur,E=d.hasError,h=d.resetAllTouched,g=d.validateFieldList,y=function(e){return e.values.cardNumber}(u),v=function(e){return e.values.challengeC}(u),_=function(e){return e.values.creditLimit}(u),O=function(e){return e.values.cardExpiryDate_0_month}(u),T=function(e){return e.values.cardExpiryDate_1_year}(u),S=function(e){return e.values.dob_0_day}(u),C=function(e){return e.values.dob_1_month}(u),P=function(e){return e.values.dob_2_year}(u),N=Object(k.useMemo)(function(){return{cardNumber:y,cardExpiryDate:"".concat(O,"/").concat(T),challengeC:btoa(v),creditLimit:{currency:"GBP",amount:_?parseFloat(_.replace(/,/g,"")):""},dob:"".concat(S,"/").concat(C,"/").concat(P)}},[O,T,y,v,_,S,C,P]),R=Er(N),w=R.refetch,I=R.isFetching,A=Object(k.useCallback)(function(e){var r=e.cards,t=void 0===r?[]:r,a=e.responseCode,o=e.status;if(204===o)return n();200===o&&"REGISTERED_USER_OTP_NOT_ELIGIBLE"===a&&0===t.length&&(l(ea.ALREADY_REGISTERED),c(ea.USER_ALREADY_REGISTERED)),200===o&&"REGISTERED_USER_OTP_ELIGIBLE"===a&&0===t.length&&(l(ea.ALREADY_REGISTERED),c(ea.USER_ALREADY_REGISTERED_OTP)),200===o&&"REGISTERED_USER_OTP_NOT_ELIGIBLE"===a&&t.length>0&&(l(ea.ALREADY_REGISTERED),c(ea.USER_ALREADY_REGISTERED_WITH_CARDS)),200===o&&"REGISTERED_USER_OTP_ELIGIBLE"===a&&t.length>0&&(l(ea.ALREADY_REGISTERED),c(ea.USER_ALREADY_REGISTERED_WITH_CARDS_OTP))},[l,c,n]),L=Object(k.useCallback)(function(e){var r=ra.topLevelErrors,t={},n=e.response.status,a=e.error.response.length?JSON.parse(e.error.response):{},s=a.errorCode,u=a.attemptLeft;400!==n||"INVALID_DETAILS"!==s||u||(t=r[s]),400===n&&"BAD_REQUEST"===s&&(t={invisible:!0}),400===n&&"NOT_A_PRIMARY_CARD"===s&&(t=r[s]),400===n&&"INVALID_DETAILS"===s&&[1,2].includes(u)&&(t=r["".concat(s,"_ATTEMPTS_LEFT_").concat(u)]),400===n&&"CAN_NOT_REGISTER"===s&&(o(n),c(ea.ACCOUNT_NOT_ELIGIBLE),l(ea.UNABLE_TO_REGISTER)),423===n&&"LOCKED"===s&&(o(n),c(ea.EXCEEDED_ATTEMPTS),l(ea.UNABLE_TO_REGISTER)),500===n&&(o(n),c(ea.TECHNICAL_DIFFICULTIES),l(ea.UNABLE_TO_REGISTER)),i(t),t&&!t.invisible&&Object(jt.a)("#FormErrorWell",100)},[i,o,l,c]),j=Object(k.useCallback)(function(){var e=function(e){return function(){var r=this,t=arguments;return new Promise(function(n,a){var o=e.apply(r,t);function l(e){Vt(o,n,a,l,c,"next",e)}function c(e){Vt(o,n,a,l,c,"throw",e)}l(void 0)})}}(regeneratorRuntime.mark(function e(r){var t,n,a,o,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=["cardNumber","cardExpiryDate","challengeC","creditLimit","dob"],r.preventDefault(),!(g(t).length>0)){e.next=5;break}return Object(jt.a)('[data-id*="error"]:not(:empty)',100),e.abrupt("return");case 5:return e.next=7,w();case 7:return n=e.sent,a=n.data,o=n.error,l=n.isError,e.abrupt("return",l?L(o):A(a));case 12:case"end":return e.stop()}},e)}));return function(r){return e.apply(this,arguments)}}(),[L,A,w,g]);return{values:{cardNumber:y,challengeC:v,creditLimit:_},clearSelf:p,onFieldChange:f,onFieldBlur:b,hasError:E,resetAllTouched:h,onCardNumberChange:function(e){var r=e.target.value;t("cardNumber_0_first",r.substring(0,4)),t("cardNumber_1_second",r.substring(4,8)),t("cardNumber_2_third",r.substring(8,12)),t("cardNumber_3_fourth",r.substring(12,16)),f(e)},inlineErrors:r,topLevelError:a,onSubmit:j,isSubmitting:I}};function zt(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var n,a,o=[],l=!0,c=!1;try{for(t=t.call(e);!(l=(n=t.next()).done)&&(o.push(n.value),!r||o.length!==r);l=!0);}catch(e){c=!0,a=e}finally{try{l||null==t.return||t.return()}finally{if(c)throw a}}return o}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return Qt(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Qt(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qt(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var Jt=function(){var e=Zt(),r=e.values,t=e.clearSelf,n=e.onFieldChange,a=e.onFieldBlur,o=e.hasError,l=e.resetAllTouched,c=e.onCardNumberChange,i=e.inlineErrors,s=e.topLevelError,u=e.onSubmit,m=e.isSubmitting,d=gr(),p=d.currentStep,f=d.goToPreviousStep,b=Object(We.h)().stopNumFieldKeyEvents,E=zt(Object(k.useState)(window.innerWidth<480),2),h=E[0],g=E[1];Object(k.useEffect)(function(){var e=Object(Gt.a)(function(){return g(window.innerWidth<480)},200);return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[]);var y={values:r,inlineErrors:i,topLevelError:s,isSubmitting:m,currentStep:p,singleInputCardNumber:h,goToPreviousStep:f,clearSelf:t,hasError:o,onFieldChange:n,onFieldBlur:a,onSubmit:u,parseEvent:Ge.a,onCardNumberChange:c,stopNumFieldKeyEvents:b};return Object(We.f)(function(){l(),Me.a.scrollToY(0,300,"easeInOutQuint"),Object(Ge.c)("register","AccountDetails")}),x.a.createElement(Ht,y)},Xt=function(){return x.a.createElement(k.Fragment,null,x.a.createElement("p",null,"When you've finished your registration, you can view, print and download ",x.a.createElement("strong",null,"up to 7 years of statements and documents ")," ","online easily and quickly. This means we won't send you paper statements and some other documents about your account in the post. However, there may be times when we need to send you some things by post."),x.a.createElement("p",null,"To make sure you don't miss anything,"," ",x.a.createElement("strong",null,"we'll send you a notification whenever anything is ready to view online.")))},$t=function(){return x.a.createElement(k.Fragment,null,x.a.createElement("p",null,"You've already switched to online statements and documents, so you can view, download and print up to 7 years of statements and documents online and in our app."))},en=function(){return x.a.createElement(k.Fragment,null,x.a.createElement("p",null,"When you've finished your registration, you can view, print and download ",x.a.createElement("strong",null," up to 7 years of statements and documents ")," ","online quickly and easily. This means we won't send you paper statements and documents about your account in the post. However, there may be times when we need to send you some things by post."))},rn=(t(463),function(e){var r=e.label,t=e.emailAddress,n=e.alertPreference,a=e.mobilePhone,o=e.onChange,l=e.disabled,c=Object(k.useCallback)(function(e,r){o({target:{name:e,value:r,type:"radio"}})},[o]);return x.a.createElement("div",{className:"_1NkcD"},x.a.createElement(ot,{name:"alertPreference",label:r,options:[{value:"email",label:"By email to ".concat(t)},{value:"sms",label:"By text message to ".concat(a)}],disabled:l,className:"_1NkcD",onChange:c,value:n}))});rn.propTypes={label:B.a.string.isRequired,emailAddress:B.a.string,alertPreference:B.a.string,mobilePhone:B.a.string,onChange:B.a.func,disabled:B.a.bool};var tn=rn,nn=function(e){var r=e.firstPara,t=e.emailAddress;return x.a.createElement("div",{className:"_3orAh"},x.a.createElement("p",null,r),x.a.createElement("p",{className:"_1zNjY"},t))};nn.propTypes={firstPara:B.a.string.isRequired,emailAddress:B.a.string};var an=nn,on=t(82),ln=function(){return x.a.createElement(on.a,{bdl:!0,className:"_2Kc4D"},"To receive paper statements and documents in the post, you can switch your preferences back to paper at any time by going to your 'Statements and documents preferences' on the 'Manage account' page. You'll find it in the top menu when you log in to your account.")},cn=function(){return x.a.createElement(on.a,{bdl:!0,className:"_2Kc4D"},"To receive paper statements and documents in the post, you can switch your preferences back to paper at any time by going to your 'Statements and documents preferences' on the 'Manage account' page when you log in to your account.")},sn=function(){return x.a.createElement(on.a,{bdl:!0,className:"_2Kc4D"},"To receive notifications by text message instead, log in to your account and enter your phone number in the 'Manage account' page, then you'll be able to swap to texts in the 'Alerts and reminders' section on the same page.")},un=function(e){var r=e.screenOptions,t=e.emailAddress,n=e.alertPreference,a=e.maskedMobileNumber,o=e.goToPreviousStep,l=e.onFieldChange,c=e.isSubmitting,i=e.onSubmit,s=e.currentStep,u=e.parseEvent;return x.a.createElement("form",{className:"_2f0XQ",onSubmit:i},x.a.createElement("h4",null,"Online statements and documents"),r===ea.NOT_PAPERLESS_CHOOSE_ALERT&&x.a.createElement(k.Fragment,null,x.a.createElement(Xt,null),x.a.createElement(tn,{label:"How would you like to be notified?",emailAddress:t,mobilePhone:a,alertPreference:n,onChange:l,disabled:c}),x.a.createElement(ln,null)),r===ea.IS_PAPERLESS_CHOOSE_ALERT&&x.a.createElement(k.Fragment,null,x.a.createElement($t,null),x.a.createElement(tn,{label:"Your statement and document ready notifications are sent to",emailAddress:t,mobilePhone:a,alertPreference:n,onChange:l,disabled:c}),x.a.createElement(cn,null)),r===ea.IS_PAPERLESS_ALERT_CONFIRM&&x.a.createElement(k.Fragment,null,x.a.createElement($t,null),x.a.createElement(an,{firstPara:"Your statement and document ready notifications are sent to",emailAddress:t}),x.a.createElement(cn,null)),r===ea.NOT_PAPERLESS_ALERT_CONFIRM&&x.a.createElement(k.Fragment,null,x.a.createElement(en,null),x.a.createElement(an,{firstPara:"Your statement and document ready notifications will be sent to",emailAddress:t}),x.a.createElement(sn,null)),x.a.createElement(Nr,{currentStep:s}),x.a.createElement(Dr.a,null,x.a.createElement(Te.a,{type:"button",style:"secondary",onClick:o,disabled:c,bdl:!0},"Back"),x.a.createElement(Te.a,{type:"submit",loading:c,disabled:c,onClick:u,bdl:!0},"Next")))};un.propTypes={screenOptions:B.a.string,emailAddress:B.a.string,alertPreference:B.a.string,maskedMobileNumber:B.a.string,goToPreviousStep:B.a.func,onFieldChange:B.a.func,isSubmitting:B.a.bool,onSubmit:B.a.func,currentStep:B.a.number,parseEvent:B.a.func};var mn=Object(k.memo)(un);function dn(e,r,t,n,a,o,l){try{var c=e[o](l),i=c.value}catch(e){return void t(e)}c.done?r(i):Promise.resolve(i).then(n,a)}var pn=function(){var e=hn().updateDigitalStatements,r=Xn(),t=r.state,n=r.dispatch,a=gr(),o=a.goToNextStep,l=a.setErrorCode,c=a.setScreen,i=a.setErrorType,s=Object(We.c)({state:t,dispatch:n}).onFieldChange,u=function(e){return e.values.alertPreference}(t),m=Object(k.useCallback)(function(e){204===e.response.status&&o()},[o]),d=Object(k.useCallback)(function(e){var r=e.response.status;500!==r&&400!==r||(l(r),i(ea.TECHNICAL_DIFFICULTIES),c(ea.UNABLE_TO_REGISTER))},[l,c,i]);return{onSubmit:Object(k.useCallback)(function(){var r=function(e){return function(){var r=this,t=arguments;return new Promise(function(n,a){var o=e.apply(r,t);function l(e){dn(o,n,a,l,c,"next",e)}function c(e){dn(o,n,a,l,c,"throw",e)}l(void 0)})}}(regeneratorRuntime.mark(function r(t){var n,a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t.preventDefault(),n={preference:u},r.prev=2,r.next=5,e.mutateAsync(n);case 5:a=r.sent,m(a),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(2),d(r.t0);case 12:case"end":return r.stop()}},r,null,[[2,9]])}));return function(e){return r.apply(this,arguments)}}(),[e,m,d,u]),isSubmitting:e.isLoading,onFieldChange:s,values:{alertPreference:u}}};function fn(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function bn(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?fn(Object(t),!0).forEach(function(r){En(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):fn(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function En(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var hn=function(){var e=Object(tr.useQueryClient)();return{updateDigitalStatements:Object(tr.useMutation)(function(e){return Object(nr.b)(ar.I,e)},{onSuccess:function(r,t){var n=t.preference;e.setQueryData("contactDetails",function(e){return bn(bn({},e),{},{alertPreference:n})})}})}},gn=function(){var e=pn(),r=e.isSubmitting,t=e.onSubmit,n=e.onFieldChange,a=e.values,o=function(){var e=mr(!1),r=e.email,t=e.maskedMobileNumber,n=e.isPaperless;return{dataLayerInfo:Object(k.useMemo)(function(){var e=void 0;return n&&r&&t?e="PaperlessEM":n&&r?e="PaperlessE":n&&t?e="PaperlessM":!n&&r&&t?e="NonPaperlessEM":!n&&r?e="NonPaperlessE":!n&&t&&(e="NonPaperlessM"),{page_version:e}},[r,t,n])}}().dataLayerInfo,l=mr(!1),c=l.email,i=l.maskedMobileNumber,s=gr(),u=s.screenOptions,m=s.currentStep,d=s.goToPreviousStep;Object(We.f)(function(){Me.a.scrollToY(0,300,"easeInOutQuint"),Object(Ge.c)("register","DigitalStatements",o)});var p={screenOptions:u,emailAddress:c,alertPreference:a.alertPreference,maskedMobileNumber:i,goToPreviousStep:d,onFieldChange:n,isSubmitting:r,onSubmit:t,currentStep:m,parseEvent:Ge.a};return x.a.createElement(mn,p)},yn=(t(1358),function(e){var r=e.labelledBy,t=e.className;return x.a.createElement("div",{className:(t?t+" ":"")+"_1npdv","data-id":"remember-username-info"},x.a.createElement("div",{"aria-live":"polite","aria-labelledby":r},x.a.createElement("p",{className:"h5qY5"},"When you tick this, your username will be saved on this device as long as you've switched cookies on for your browser. Your passcode and memorable word won't be saved, so your account is always fully protected. However, we don't recommend you do this on a public or shared device.")))});yn.propTypes={labelledBy:B.a.string,className:B.a.string};var vn=yn,_n=(t(1356),function(e){var r=e.isPasscodeHidden,t=e.isConfirmPasscodeHidden,n=e.isInfoOpen,a=e.passcodeMatchesConfirm,o=e.memorableWordMatchesConfirm,l=e.isSubmitting,c=e.values,i=e.inlineErrors,s=e.checklistErrors,u=e.toggleIsInfoOpen,m=e.togglePasscode,d=e.toggleConfirmPasscode,p=e.hideBothPasscodes,f=e.prevent,b=e.onFieldChange,E=e.onFieldBlur,h=e.onSubmit,g=e.onConfirmPasscodeChange,y=e.onConfirmMemWordChange,v=e.goToPreviousStep,_=e.parseEvent,O=e.stopNumFieldKeyEvents;return x.a.createElement("form",{onSubmit:h,className:"AFndP"},x.a.createElement("h2",null,"Set up your login details"),x.a.createElement("p",{className:"_1ohNK"},"You'll need these details each time you want to log in to your account."),x.a.createElement(Qr,{dataId:"username-wrapper"},x.a.createElement(Xr,{name:"username",label:"Create a username"}),x.a.createElement(qr,{helpText:"This can be a familiar name or phrase that's unique to you.",name:"createUsername"}),x.a.createElement(Ur,{label:"Your username must:",checklistErrors:s.username.list,numErrors:s.username.numErrors}),x.a.createElement(Yr,{errorOrWarning:i.username,name:"username",pattern:/create your username|complete your username|username is already in use/i}),x.a.createElement(ct,null,x.a.createElement(St,{name:"username",type:"text",onChange:b,onBlur:E,onFocus:p,disabled:l,value:c.username,autocomplete:"off",hasError:!!i.username}),!!i.username&&x.a.createElement(bt,{type:"warning"}))),x.a.createElement("div",{className:"_1cs8L"},x.a.createElement(Wr,{name:"rememberUsername",label:"Remember my username on this computer.",onChange:b,onFocus:p,value:c.rememberUsername}),x.a.createElement(Pe.a,{type:"button",onClick:u,onFocus:p,"aria-label":"Close information about remember my username",id:"rememberUsernameInfo",className:"_1qLrd",disabled:l},n?"Close":"More")),n&&x.a.createElement(vn,{labelledBy:"rememberUsernameInfo",className:"EfIJc"}),x.a.createElement("hr",null),x.a.createElement("h3",null,"Secure details"),x.a.createElement("p",{className:"_1WmrZ"},"Choose something easy to remember, but difficult for someone else to guess. Keep these details safe and secure, and never tell them to anyone."),x.a.createElement(Qr,{dataId:"passcode-wrapper"},x.a.createElement(Xr,{name:"passcode",label:"Create your passcode"}),x.a.createElement(Ur,{label:"Your passcode must:",checklistErrors:s.passcode.list,numErrors:s.passcode.numErrors}),x.a.createElement(ct,null,x.a.createElement(Yr,{errorOrWarning:i.passcode,pattern:/create your passcode|complete your passcode/i,name:"passcode"}),x.a.createElement(St,{name:"passcode",type:r?"password":"text",onChange:b,onBlur:E,disabled:l,value:c.passcode,autocomplete:"off",underlinePlaceholders:6,hasError:!!i.passcode,useMonospace:!0,onKeyDown:O}),x.a.createElement(ht,{hide:r,toggleShowHide:m,iconPadding:a&&!i.passcode||!!i.passcode,hasError:!!i.passcode}),!!i.passcode&&x.a.createElement(bt,{type:"warning"}),a&&!i.passcode&&x.a.createElement(bt,{type:"tick"}))),x.a.createElement("div",{className:"YZZP-"},x.a.createElement(Qr,null,x.a.createElement(Xr,{name:"confirmPasscode",label:"Confirm passcode"}),x.a.createElement(Yr,{errorOrWarning:i.confirmPasscode,name:"confirmPasscode"}),x.a.createElement(ct,null,x.a.createElement(St,{name:"confirmPasscode",type:t?"password":"text",onChange:g,onBlur:E,disabled:l,onPaste:f,value:c.confirmPasscode,hasError:!!i.confirmPasscode,underlinePlaceholders:6,autocomplete:"off",useMonospace:!0,onKeyDown:O}),x.a.createElement(ht,{hide:t,toggleShowHide:d,iconPadding:a&&!i.confirmPasscode||!!i.confirmPasscode,hasError:!!i.confirmPasscode}),i.confirmPasscode&&x.a.createElement(bt,{type:"warning"}),a&&!i.confirmPasscode&&x.a.createElement(bt,{type:"tick"})))),x.a.createElement("hr",{className:"_9IvtS"}),x.a.createElement(Qr,{dataId:"memorableWord-wrapper"},x.a.createElement(Xr,{name:"memorableWord",label:"Create your memorable word"}),x.a.createElement(Ur,{label:"Your memorable word must:",checklistErrors:s.memorableWord.list,numErrors:s.memorableWord.numErrors}),x.a.createElement(ct,null,x.a.createElement(Yr,{errorOrWarning:i.memorableWord,pattern:/create your memorable word|complete your memorable word/i,name:"memorableWord"}),x.a.createElement(St,{name:"memorableWord",type:"text",autocomplete:"off",onChange:b,onBlur:E,disabled:l,onFocus:p,hasError:!!i.memorableWord,value:c.memorableWord}),!!i.memorableWord&&x.a.createElement(bt,{type:"warning"}),o&&!i.memorableWord&&x.a.createElement(bt,{type:"tick"}))),x.a.createElement(Qr,null,x.a.createElement(Xr,{name:"confirmMemorableWord",label:"Confirm memorable word"}),x.a.createElement(Yr,{errorOrWarning:i.confirmMemorableWord,name:"confirmMemorableWord"}),x.a.createElement(ct,null,x.a.createElement(St,{name:"confirmMemorableWord",type:"text",autocomplete:"off",onChange:y,onBlur:E,disabled:l,onPaste:f,onFocus:p,hasError:!!i.confirmMemorableWord,value:c.confirmMemorableWord}),i.confirmMemorableWord&&x.a.createElement(bt,{type:"warning"}),o&&!i.confirmMemorableWord&&x.a.createElement(bt,{type:"tick"}))),x.a.createElement(Qr,{dataId:"memorableWordReminder-wrapper"},x.a.createElement(Xr,{name:"memorableWordReminder",label:"Create your memorable word reminder"}),x.a.createElement(qr,{helpText:"We'll read it out over the phone if you forget your memorable word.",name:"memorableWordReminder"}),x.a.createElement(Ur,{label:"Your memorable word reminder must:",checklistErrors:s.memorableWordReminder.list,numErrors:s.memorableWordReminder.numErrors}),x.a.createElement(ct,null,x.a.createElement(Yr,{errorOrWarning:i.memorableWordReminder,pattern:/create your memorable word reminder|complete your memorable word reminder/i,name:"memorableWordReminder"}),x.a.createElement(St,{name:"memorableWordReminder",type:"text",autocomplete:"off",onChange:b,onBlur:E,disabled:l,onPaste:f,onFocus:p,hasError:!!i.memorableWordReminder,value:c.memorableWordReminder}),!!i.memorableWordReminder&&x.a.createElement(bt,{type:"warning"}))),x.a.createElement("hr",null),x.a.createElement("h3",null,"Terms & Conditions"),x.a.createElement(Yr,{errorOrWarning:i.isTnCAgreed,name:"isTnCAgreed"}),x.a.createElement(Wr,{name:"isTnCAgreed",label:"I've read and agree to the ",externalLink:{href:"https://www.barclaycard.co.uk/personal/internet-terms-of-use",text:"Barclaycard Internet terms and conditions"},disabled:l,onChange:b,onFocus:p,error:!!i.isTnCAgreed,value:c.isTnCAgreed}),x.a.createElement("hr",null),x.a.createElement(Dr.a,null,x.a.createElement(Te.a,{type:"button",style:"secondary",onClick:v,disabled:l,bdl:!0},"Back"),x.a.createElement(Te.a,{type:"submit",loading:l,disabled:l,onClick:_,bdl:!0},"Next")))});_n.propTypes={isPasscodeHidden:B.a.bool,isConfirmPasscodeHidden:B.a.bool,isInfoOpen:B.a.bool,passcodeMatchesConfirm:B.a.bool,memorableWordMatchesConfirm:B.a.bool,isSubmitting:B.a.bool,values:B.a.object,inlineErrors:B.a.object,checklistErrors:B.a.object,toggleIsInfoOpen:B.a.func,togglePasscode:B.a.func,toggleConfirmPasscode:B.a.func,hideBothPasscodes:B.a.func,prevent:B.a.func,onFieldChange:B.a.func,onFieldBlur:B.a.func,onSubmit:B.a.func,onConfirmPasscodeChange:B.a.func,onConfirmMemWordChange:B.a.func,goToPreviousStep:B.a.func,parseEvent:B.a.func,stopNumFieldKeyEvents:B.a.func};var On=Object(k.memo)(_n),Tn=D.inlineErrors,Sn={username:[function(e){return Dt.v(8,16,Tn.characterLength8To16)(e)},function(e){return Dt.u(1,Tn.minDigits1)(e)},function(e){return Dt.t(1,Tn.minAlphaChars1)(e)},function(e){return Dt.i(Tn.emptyOrAlphaNumeric)(e)},function(e){return Dt.B(Tn.usernameRequired)(e)}],passcode:[function(e){return Dt.j(6,Tn.exactDigits6)(e)},function(e){return Dt.r(Tn.maxRepeatingChars2Passcode)(e)},function(e){return Dt.q(Tn.maxNumbersInSequence3)(e)},function(e){return Dt.B(Tn.passcodeRequired)(e)},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0;return Dt.m(Tn.matchesDateOfBirth)(e,r.values.dob)}],confirmPasscode:[function(){if((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")!==(arguments.length>1?arguments[1]:void 0).values.passcode)return Tn.confirmPasscode},function(e){return Dt.B(Tn.passcodeConfirmRequired)(e)}],memorableWord:[function(e){return Dt.y(Tn.onlyAlpha)(e)},function(e){return Dt.v(6,8,Tn.characterLength6To8)(e)},function(e){return Dt.r(Tn.maxRepeatingChars2MemWord)(e)},function(e){return Dt.s(Tn.maxTwiceLettersInSequence)(e)},function(e){return Dt.p(Tn.maxLettersInSequence2)(e)},function(e){return Dt.o(Tn.maxKeyboardSequence3)(e)},function(e){return Dt.z(Tn.onlyAlphaNumeric)(e)},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0;return Dt.x(Tn.matchesLastName)(e,r.values.customerName)},function(e){return Dt.B(Tn.memorableWordRequired)(e)}],confirmMemorableWord:[function(){if((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")!==(arguments.length>1?arguments[1]:void 0).values.memorableWord)return Tn.matchesMemorableWord},function(e){return Dt.B(Tn.memorableWordConfirmRequired)(e)}],memorableWordReminder:[function(e){return Dt.v(0,20,Tn.beUpTo20Characters)(e)},function(e){return Dt.b(Tn.alphaNumericOrSpace)(e)},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0;if(e.toLowerCase()===r.values.memorableWord.toLowerCase())return Tn.doesNotMatchMemorableWord},function(e){return Dt.B(Tn.memorableReminderRequired)(e)}],isTnCAgreed:[function(e){return Dt.C(Tn.consentRequired)(e)}]},Cn=D.inlineErrors,Pn={username:[{label:Cn.characterLength8To16,validator:function(e){return Dt.v(8,16,Cn.characterLength8To16)(e)}},{label:Cn.minDigits1,validator:function(e){return Dt.u(1,Cn.minDigits1)(e)}},{label:Cn.minAlphaChars1,validator:function(e){return Dt.t(1,Cn.minAlphaChars1)(e)}},{label:Cn.emptyOrAlphaNumeric,validator:function(e){return Dt.i(Cn.emptyOrAlphaNumeric)(e)}}],passcode:[{label:Cn.exactDigits6,validator:function(e){return Dt.j(6,Cn.exactDigits6)(e)}},{label:Cn.maxRepeatingChars2Passcode,validator:function(e){return Dt.r(Cn.maxRepeatingChars2Passcode)(e)}},{label:Cn.maxNumbersInSequence3,validator:function(e){return Dt.q(Cn.maxNumbersInSequence3)(e)}},{label:Cn.matchesDateOfBirth,validator:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0;return Dt.m(Cn.matchesDateOfBirth)(e,r.values.dob)}}],memorableWord:[{label:Cn.onlyAlphaAndLength6To8,validator:function(e){return Dt.y(Cn.onlyAlpha)(e)||Dt.v(6,8,Cn.characterLength6To8)(e)}},{label:Cn.maxRepeatingChars2MemWord,validator:function(e){return Dt.r(Cn.maxRepeatingChars2MemWord)(e)}},{label:Cn.maxTwiceLettersInSequence,validator:function(e){return Dt.s(Cn.maxTwiceLettersInSequence)(e)}},{label:Cn.maxLettersInSequence2,validator:function(e){return Dt.p(Cn.maxLettersInSequence2)(e)}},{label:Cn.maxKeyboardSequence3,validator:function(e){return Dt.o(Cn.maxKeyboardSequence3)(e)}},{label:Cn.onlyAlphaNumeric,validator:function(e){return Dt.z(Cn.onlyAlphaNumeric)(e)}},{label:Cn.matchesLastName,validator:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0;return Dt.x(Cn.matchesLastName)(e,r.values.customerName)}}],memorableWordReminder:[{label:Cn.beUpTo20Characters,validator:function(e){return Dt.v(0,20,Cn.beUpTo20Characters)(e)}},{label:Cn.alphaNumericOrSpace,validator:function(e){return Dt.b(Cn.alphaNumericOrSpace)(e)}},{label:Cn.doesNotMatchMemorableWord,validator:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0;if(e.toLowerCase()===r.values.memorableWord.toLowerCase())return Cn.doesNotMatchMemorableWord}}]},Nn={passcode:Yt.c([Yt.k,Yt.o]),confirmPasscode:Yt.c([Yt.k,Yt.o])},Rn=t(57);function wn(e,r,t,n,a,o,l){try{var c=e[o](l),i=c.value}catch(e){return void t(e)}c.done?r(i):Promise.resolve(i).then(n,a)}function In(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var n,a,o=[],l=!0,c=!1;try{for(t=t.call(e);!(l=(n=t.next()).done)&&(o.push(n.value),!r||o.length!==r);l=!0);}catch(e){c=!0,a=e}finally{try{l||null==t.return||t.return()}finally{if(c)throw a}}return o}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return An(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return An(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function An(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function Ln(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function jn(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Ln(Object(t),!0).forEach(function(r){Dn(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ln(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function Dn(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var kn=function(){var e=Wn().updateLoginDetails,r=mr().customerName,t=Er().dobRaw,n=Xn(),a=n.state,o=n.dispatch,l=gr(),c=l.setTouched,i=l.setInlineError,s=l.setScreen,u=l.setErrorCode,m=l.setErrorType,d=Object(We.c)({state:jn(jn({},a),{},{values:jn(jn({},a.values),{},{customerName:r,dob:t})}),dispatch:o,validators:Sn,normalizers:Nn,checklistValidators:Pn}),p=d.validateFieldList,f=d.onFieldBlur,b=d.onFieldChange,E=d.validateField,h=d.resetAllTouched,g=d.initChecklistValidation,y=In(Object(k.useState)(!0),2),v=y[0],_=y[1],O=In(Object(k.useState)(!0),2),T=O[0],S=O[1],C=In(Object(k.useState)(!1),2),P=C[0],N=C[1],R=function(e){return e.values.username}(a),w=function(e){return e.values.rememberUsername}(a),I=function(e){return e.values.passcode}(a),A=function(e){return e.values.memorableWord}(a),L=function(e){return e.values.memorableWordReminder}(a),j=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=e.values.isTnCAgreed;return void 0===t?r:t}(a,!1),D=function(e){return e.values.confirmMemorableWord}(a),x=function(e){return e.values.confirmPasscode}(a),F=Object(k.useCallback)(function(e){var r=!0;0===I.indexOf(e.target.value)&&(i("confirmPasscode",void 0),r=!1),c("confirmPasscode",r),b(e,r)},[b,c,i,I]),B=Object(k.useCallback)(function(e){var r=!0;0===A.indexOf(e.target.value)&&(i("confirmMemorableWord",void 0),r=!1),c("confirmMemorableWord",r),b(e,r)},[b,c,i,A]),W=Object(k.useCallback)(function(){_(!0),S(!0)},[_,S]),M=Object(k.useCallback)(function(){return _(function(e){return!e})},[_]),U=Object(k.useCallback)(function(){return S(function(e){return!e})},[S]),H=Object(k.useCallback)(function(){return N(function(e){return!e})},[N]),G=Object(k.useMemo)(function(){return I===x&&""!==I},[I,x]),Y=Object(k.useMemo)(function(){return A===D&&""!==A},[A,D]);Object(k.useEffect)(function(){E("confirmPasscode",x)},[I,E,x]),Object(k.useEffect)(function(){E("confirmMemorableWord",D)},[A,E,D]);var q=Object(k.useCallback)(function(e){var r=e.response.status,t=e.data.preferenceUpdated;200===r&&(w&&Object(Rn.c)(R),s(t?ea.REGISTRATION_SUCCESS:ea.REGISTRATION_SUCCESS_PREFERENCES_FAILED))},[s,w,R]),K=Object(k.useCallback)(function(e){var r=ra.inlineErrors,t=e.response.status,n=e.error.response.length?JSON.parse(e.error.response):{},a=n.errorCode,o=n.errorList;400===t&&"BAD_REQUEST"===a&&(o.forEach(function(e){"ERR_REG001"===e.code&&i("username",r[e.code]),"ERR_REG002"===e.code&&i("passcode",r[e.code]),"ERR_REG003"===e.code&&i("memorableWord",r[e.code]),"ERR_REG004"===e.code&&i("memorableWordReminder",r[e.code])}),Object(jt.a)('[data-id*="error"]:not(:empty)',100)),409===t&&"FAILURE"===a&&o&&"ERR_REG005"===o[0].code&&(i("username",r.ERR_REG005),Object(jt.a)('[data-id*="error"]:not(:empty)',100)),500===t&&(u(t),m(ea.TECHNICAL_DIFFICULTIES),s(ea.UNABLE_TO_REGISTER))},[i,u,m,s]),V=Object(k.useCallback)(function(){var r=function(e){return function(){var r=this,t=arguments;return new Promise(function(n,a){var o=e.apply(r,t);function l(e){wn(o,n,a,l,c,"next",e)}function c(e){wn(o,n,a,l,c,"throw",e)}l(void 0)})}}(regeneratorRuntime.mark(function r(t){var n,a,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(n=["username","passcode","confirmPasscode","memorableWord","confirmMemorableWord","memorableWordReminder","isTnCAgreed"],t.preventDefault(),!(p(n).length>0)){r.next=5;break}return Object(jt.a)('[data-id*="error"]:not(:empty),[class*="warningText"]',100),r.abrupt("return");case 5:return a={userName:R,challengeP:btoa(I),challengeM:btoa(A),reminderChallengeM:btoa(L),isTnCAgreed:j},r.prev=6,r.next=9,e.mutateAsync(a);case 9:o=r.sent,q(o),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(6),K(r.t0);case 16:case"end":return r.stop()}},r,null,[[6,13]])}));return function(e){return r.apply(this,arguments)}}(),[e,p,q,K,R,j,A,L,I]);return{isSubmitting:e.isLoading,onSubmit:V,onFieldBlur:f,onFieldChange:b,validateField:E,resetAllTouched:h,onConfirmPasscodeChange:F,onConfirmMemWordChange:B,values:{username:R,rememberUsername:w,passcode:I,memorableWord:A,memorableWordReminder:L,isTnCAgreed:j,confirmPasscode:x},isPasscodeHidden:v,isConfirmPasscodeHidden:T,setIsPasscodeHidden:_,setIsConfirmPasscodeHidden:S,hideBothPasscodes:W,isInfoOpen:P,togglePasscode:M,toggleConfirmPasscode:U,toggleIsInfoOpen:H,passcodeMatchesConfirm:G,memorableWordMatchesConfirm:Y,initChecklistValidation:g}};function xn(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function Fn(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?xn(Object(t),!0).forEach(function(r){Bn(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):xn(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function Bn(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Wn=function(){var e=Object(tr.useQueryClient)();return{updateLoginDetails:Object(tr.useMutation)(function(e){return Object(nr.b)(ar.J,e)},{onSuccess:function(r,t){var n=t.userName;e.setQueryData("accountDetails",function(e){return Fn(Fn({},e),{},{username:n})})}})}},Mn=function(){var e=kn(),r=e.onSubmit,t=e.isSubmitting,n=e.values,a=e.onFieldBlur,o=e.onFieldChange,l=e.resetAllTouched,c=e.onConfirmPasscodeChange,i=e.onConfirmMemWordChange,s=e.isPasscodeHidden,u=e.isConfirmPasscodeHidden,m=e.setIsPasscodeHidden,d=e.setIsConfirmPasscodeHidden,p=e.hideBothPasscodes,f=e.isInfoOpen,b=e.togglePasscode,E=e.toggleConfirmPasscode,h=e.toggleIsInfoOpen,g=e.passcodeMatchesConfirm,y=e.memorableWordMatchesConfirm,v=e.initChecklistValidation,_=gr(),O=_.inlineErrors,T=_.checklistErrors,S=_.goToPreviousStep,C=Object(We.g)().prevent,P=Object(We.h)().stopNumFieldKeyEvents;Object(We.f)(v),Object(We.f)(function(){Me.a.scrollToY(0,300,"easeInOutQuint"),Object(Ge.c)("register","SetupLoginDetails"),l()});var N={goToPreviousStep:S,inlineErrors:O,checklistErrors:T,onFieldBlur:a,onFieldChange:o,values:n,onConfirmPasscodeChange:c,onConfirmMemWordChange:i,prevent:C,onSubmit:r,isSubmitting:t,parseEvent:Ge.a,isPasscodeHidden:s,isConfirmPasscodeHidden:u,setIsPasscodeHidden:m,setIsConfirmPasscodeHidden:d,hideBothPasscodes:p,isInfoOpen:f,togglePasscode:b,toggleConfirmPasscode:E,toggleIsInfoOpen:h,passcodeMatchesConfirm:g,memorableWordMatchesConfirm:y,stopNumFieldKeyEvents:P};return x.a.createElement(On,N)},Un=function(){return x.a.createElement($n,null,x.a.createElement(me,null,x.a.createElement(me.Route,{step:1,screen:ea.MULTI_STEP,Component:Fr}),x.a.createElement(me.Route,{step:2,screen:ea.MULTI_STEP,Component:Jt}),x.a.createElement(me.Route,{step:3,screen:ea.MULTI_STEP,Component:Wt}),x.a.createElement(me.Route,{step:4,screen:ea.MULTI_STEP,Component:gn}),x.a.createElement(me.Route,{step:5,screen:ea.MULTI_STEP,Component:Mn}),x.a.createElement(me.Route,{screen:ea.REGISTRATION_SUCCESS,Component:Je}),x.a.createElement(me.Route,{screen:ea.ALREADY_REGISTERED,Component:Ye}),x.a.createElement(me.Route,{screen:ea.UNABLE_TO_REGISTER,Component:yr}),x.a.createElement(me.Route,{screen:ea.REGISTRATION_SUCCESS_PREFERENCES_FAILED,Component:Or})))},Hn=function(){return x.a.createElement(Un,null)};function Gn(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function Yn(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Gn(Object(t),!0).forEach(function(r){qn(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Gn(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function qn(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Kn(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var n,a,o=[],l=!0,c=!1;try{for(t=t.call(e);!(l=(n=t.next()).done)&&(o.push(n.value),!r||o.length!==r);l=!0);}catch(e){c=!0,a=e}finally{try{l||null==t.return||t.return()}finally{if(c)throw a}}return o}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return Vn(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Vn(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vn(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function Zn(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function zn(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Zn(Object(t),!0).forEach(function(r){Qn(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Zn(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function Qn(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Jn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,t=Object(k.createContext)(),n=function(n){var a=n.initialState,o=void 0===a?{}:a,l=n.children,c=Kn(Object(k.useReducer)(r,Yn(Yn({},e),o)),2),i=c[0],s=c[1],u=Object(k.useMemo)(function(){return[i,s]},[i]);return x.a.createElement(t.Provider,{value:u},l)};n.propTypes={children:B.a.node,initialState:B.a.any};return{Provider:n,useStore:function(){var e=Kn(Object(k.useContext)(t),2);return{state:e[0],dispatch:e[1]}}}}({currentStep:1,values:{alertPreference:"email",cardNumber_0_first:"",cardNumber_1_second:"",cardNumber_2_third:"",cardNumber_3_fourth:"",cardNumber:"",cardExpiryDate_0_month:"",cardExpiryDate_1_year:"",cardExpiryDate:"",creditLimit:"",challengeC:"",dob_0_day:"",dob_1_month:"",dob_2_year:"",dob:"",emailAddress:"",confirmEmailAddress:"",marketingPreferenceEmail:!1,mobilePhone:"",username:"",rememberUsername:!1,passcode:"",confirmPasscode:"",memorableWord:"",confirmMemorableWord:"",memorableWordReminder:"",isTnCAgreed:!1},inlineErrors:{},checklistErrors:{username:{list:[],numErrors:0},passcode:{list:[],numErrors:0},memorableWord:{list:[],numErrors:0},memorableWordReminder:{list:[],numErrors:0}},topLevelError:void 0,touched:{},screen:p,screenOptions:void 0,errorType:void 0,accountDetails:{},contactDataRetrieved:!1,errorCode:void 0},function(e,r){switch(r.type){case o:return zn(zn({},e),{},{currentStep:e.currentStep+1});case l:return zn(zn({},e),{},{currentStep:e.currentStep-1});case a.a:return zn(zn({},e),{},{values:zn(zn({},e.values),{},Qn({},r.payload.name,r.payload.value))});case a.d:return zn(zn({},e),{},{inlineErrors:zn(zn({},e.inlineErrors),{},Qn({},r.payload.name,r.payload.error))});case a.c:return zn(zn({},e),{},{checklistErrors:zn(zn({},e.checklistErrors),{},Qn({},r.payload.name,{list:r.payload.list,numErrors:r.payload.numErrors}))});case a.e:return zn(zn({},e),{},{topLevelError:r.payload});case a.f:return zn(zn({},e),{},{touched:zn(zn({},e.touched),{},Qn({},r.payload.name,r.payload.value))});case a.b:return zn(zn({},e),{},{touched:{}});case c:return zn(zn({},e),{},{screen:r.payload.screen});case i:return zn(zn({},e),{},{screenOptions:r.payload.screenOptions});case s:return zn(zn({},e),{},{errorType:r.payload.errorType});case u:return zn(zn({},e),{},{accountDetails:zn(zn({},e.accountDetails),r.payload)});case m:return zn(zn({},e),{},{contactDataRetrieved:!0});case d:return zn(zn({},e),{},{errorCode:r.payload});default:throw new Error("Unhandled action type: ".concat(r.type))}}),Xn=Jn.useStore,$n=Jn.Provider;t.d(r,"constants",function(){return ea}),t.d(r,"errorMessages",function(){return ra}),t.d(r,"default",function(){return Hn}),t.d(r,"useRegistration",function(){return gr}),t.d(r,"useContactDetails",function(){return mr}),t.d(r,"useAccountDetails",function(){return Er}),t.d(r,"useStore",function(){return Xn}),t.d(r,"Provider",function(){return $n});var ea=n,ra=D},463:function(e,r,t){e.exports={root:"_2f0XQ",options:"_1NkcD",well:"_2Kc4D",sendAlertTo:"_3orAh",emailAddress:"_1zNjY",terms:"_3a3aS"}},464:function(e,r,t){e.exports={content:"jL03K",headerWell:"_1Oebo","accordion-item":"_3aGmY",icon:"DaX77",root:"_3npTv",username:"_7QsgY",buttons:"LG1qB",secondPara:"_2D35f",logInBtn:"_3WDZa","logInBtn--otp":"_2T1St",resetBtn:"FBNct",terms:"HJfuK","tel-icon":"_2PqH_",accordion:"w1fmN",toLogIn:"zeacf",forgotDetails:"_22NMj",usernameDetails:"p3giT"}},469:function(e,r,t){e.exports={content:"_1aIoT",root:"Twmj7",headerWell:"_2ptQN",username:"_1RpRc",rightButton:"_36ZiT",buttons:"_1jHJU"}}}]);