var thclient=thclient||{};thclient.version=3,thclient.setUpThreatMetrixJson=function(){this.getThreatMetrixJson(),document.addEventListener("pageNameChange",function(a){thclient.validateAndInitiateThreatMetrixAPI()})},thclient.pageNameChangeEvent=new CustomEvent("pageNameChange"),thclient.getThreatMetrixJson=function(){window.threatMetrixJson={};var a=new XMLHttpRequest;a.open("GET","/olb/authlogin/threatMetrixConfig.json",!0),a.onload=function(b){4===a.readyState&&200===a.status&&(window.threatMetrixJson=JSON.parse(this.responseText))},a.onerror=function(a){},a.send()},thclient.validateAndInitiateThreatMetrixAPI=function(){if(window.threatMetrixJson.pageAPIDetailsDtos)for(var a=window.threatMetrixJson.pageAPIDetailsDtos,b=window.threatMetrixJson.tmxProfilingDomain,c=window.threatMetrixJson.tmxOrgId,d=window.threatMetrixJson.tmxSessionId,e=0;e<a.length;e++)if(a[e].pageName===window.flatDigitalData.page_name){var f=a[e].apiUrl;if(thclient.profile(b,c,d),"undefined"!==f&&""!==f&&null!==f){var g=function(a,b){var c=function(e){e.data=="tmx_profiling_complete:"+d&&(thclient.invokeThretMetrixURL(a,b.eventType,b.customerEventType,b.policy),window.removeEventListener("message",c,!1))};return c};window.addEventListener("message",g(f,a[e]),!1);break}}},thclient.invokeThretMetrixURL=function(a,b,c,d){var e="currentOs="+encodeURI(window.digitalData.page.currentOs)+"&deviceType="+encodeURI(window.digitalData.page.deviceType)+"&eventType="+encodeURI(b)+"&customerEventType="+encodeURI(c)+"&policy="+d,f=new URLSearchParams(e);navigator.sendBeacon(a,f)},thclient.create_url=function(a,b,c,d,e){function f(){return Math.floor(2742745743359*Math.random())}function g(){return h(f())}function h(a){return(a+78364164096).toString(36)}var i=f(),j=f(),k=885187064159;j=((j=j-j%256+thclient.version)+i)%2742745743359,k=(k+i)%2742745743359;var s="https://"+a+"/"+(i=g()+h(i))+b,l=[(j=h(k)+h(j))+"="+c,g()+g()+"="+d];return void 0!==e&&e.length>0&&l.push(g()+g()+"="+e),s+"?"+l.join("&")},thclient.beacon=function(a,b,c,d){var e="turn:aa.online-metrix.net?transport=",f="1:"+b+":"+c,g={iceServers:[{urls:e+"tcp",username:f,credential:c},{urls:e+"udp",username:f,credential:c}]};try{var h=new RTCPeerConnection(g);h.createDataChannel(Math.random().toString());var i=function(){},j=function(a){h.setLocalDescription(a,i,i)};"undefined"==typeof Promise||h.createOffer.length>0?h.createOffer(j,i):h.createOffer().then(j,i)}catch(a){}},thclient.load_tags=function(a,b,c,d){thclient.beacon(a,b,c,d);var e=document.getElementsByTagName("head").item(0),f=document.createElement("script");f.id="tmx_tags_js",f.setAttribute("type","text/javascript");var g=thclient.create_url(a,".js",b,c,d);f.setAttribute("src",g),thclient.set_csp_nonce(f),e.appendChild(f)},thclient.load_iframe_tags=function(a,b,c,d){thclient.beacon(a,b,c,d);var e=thclient.create_url(a,".htm",b,c,d),f=document.createElement("iframe");f.title="empty",f.setAttribute("aria-disabled","true"),f.width="0",f.height="0",f.setAttribute("style","color:rgba(0,0,0,0); float:left; position:absolute; top:-200; left:-200; border:0px"),f.setAttribute("src",e),document.body.appendChild(f)},thclient.csp_nonce=null,thclient.register_csp_nonce=function(a){if(void 0!==a.currentScript&&null!==a.currentScript){var b=a.currentScript.getAttribute("nonce");void 0!==b&&null!==b&&""!==b?thclient.csp_nonce=b:void 0!==a.currentScript.nonce&&null!==a.currentScript.nonce&&""!==a.currentScript.nonce&&(thclient.csp_nonce=a.currentScript.nonce)}},thclient.set_csp_nonce=function(a){null!==thclient.csp_nonce&&(a.setAttribute("nonce",thclient.csp_nonce),a.getAttribute("nonce")!==thclient.csp_nonce&&(a.nonce=thclient.csp_nonce))},thclient.cleanup=function(){for(;null!==(hp_frame=document.getElementById("tdz_ifrm"));)hp_frame.parentElement.removeChild(hp_frame);for(;null!==(tmx_frame=document.getElementById("tmx_tags_iframe"));)tmx_frame.parentElement.removeChild(tmx_frame);for(;null!==(tmx_script=document.getElementById("tmx_tags_js"));)tmx_script.parentElement.removeChild(tmx_script)},thclient.profile=function(a,b,c,d){thclient.cleanup(),thclient.register_csp_nonce(document),thclient.load_tags(a,b,c,d)},thclient.profile_iframe=function(a,b,c,d){thclient.cleanup(),thclient.register_csp_nonce(document),thclient.load_iframe_tags(a,b,c,d)},function(){thclient.setUpThreatMetrixJson()}();